1
00:00:00,420 --> 00:00:05,700
En este capítulo trabajaremos en la funcionalidad cuando un usuario olvida su password.

2
00:00:05,880 --> 00:00:09,480
Si vamos a la pantalla de login vamos a notar que aparece un link aquí.

3
00:00:09,990 --> 00:00:11,250
Olvidaste tu password.

4
00:00:11,490 --> 00:00:17,880
Cuando lee click debería llevarme a un template donde el usuario pueda ingresar su correo electrónico.

5
00:00:18,300 --> 00:00:24,300
También te va a aparecer un botón y al darle clic a ese botón debería de llegarle un email indicándole

6
00:00:24,300 --> 00:00:27,150
las instrucciones para formatear su password.

7
00:00:27,380 --> 00:00:29,340
Bien, entonces trabajemos en esto.

8
00:00:29,340 --> 00:00:31,510
En Atom estamos en alto.

9
00:00:31,530 --> 00:00:36,780
Vamos a ir ahora a la carpeta account y nos ubicamos dentro de Hotels.com y.

10
00:00:38,410 --> 00:00:38,940
De aquí.

11
00:00:38,980 --> 00:00:40,360
Vamos a indicarle.

12
00:00:40,450 --> 00:00:42,400
Voy a copiar este pad anterior.

13
00:00:45,240 --> 00:00:46,830
Que me genere un nuevo path.

14
00:00:47,040 --> 00:00:53,340
Voy a ponerle aquí de nombre a ese path for God password o en español?

15
00:00:53,340 --> 00:00:59,580
Sería password olvidado que me va a redireccionar a esta función?

16
00:01:00,650 --> 00:01:01,580
Que tiene un nombre.

17
00:01:01,580 --> 00:01:02,690
Forgotten Password.

18
00:01:04,950 --> 00:01:07,830
Ya que le colocamos también for God password.

19
00:01:10,220 --> 00:01:10,750
En el patio.

20
00:01:10,880 --> 00:01:13,430
Aquí me faltó agregarle el slash.

21
00:01:14,920 --> 00:01:16,300
Ahora vamos hacia.

22
00:01:17,480 --> 00:01:18,080
El bus.

23
00:01:19,720 --> 00:01:23,620
El archivo que está en el interior de Account y nos ubicamos en la parte final.

24
00:01:25,520 --> 00:01:30,440
De aquí escribimos Deaf Forgotten Password.

25
00:01:33,790 --> 00:01:34,900
Y le vamos a pasar.

26
00:01:35,350 --> 00:01:36,700
Un objeto de tipo rico es.

27
00:01:40,690 --> 00:01:41,170
Qué le digo?

28
00:01:41,170 --> 00:01:45,100
Que haga un render hacia request?

29
00:01:46,450 --> 00:01:49,000
Se que le tengo que colocar el nombre del template.

30
00:01:49,420 --> 00:01:56,410
Por ahora no existe, pero va a ser el de for good momento for got password html.

31
00:01:56,410 --> 00:02:00,910
Voy a copiar este nombre y nos ubicamos en la parte final.

32
00:02:01,270 --> 00:02:07,240
En la carpeta templates hay que aparece account y dentro de account vamos a crear un nuevo archivo.

33
00:02:07,720 --> 00:02:09,220
Dale click derecho new file.

34
00:02:10,570 --> 00:02:15,730
Así que le ponemos el nombre for God password punto html más al enter.

35
00:02:16,920 --> 00:02:18,360
En la interfaz gráfica de este foro.

36
00:02:18,360 --> 00:02:24,420
Got password punto HTML va a ser muy similar a la de login, así que vamos a abrir un momento de login.

37
00:02:25,380 --> 00:02:27,210
Voy a seleccionar todo su contenido.

38
00:02:28,570 --> 00:02:32,140
Y vamos ahora a Forgotten Password y aquí lo vamos a pegar todo.

39
00:02:34,090 --> 00:02:34,360
Bien.

40
00:02:34,360 --> 00:02:38,260
Pero no quiero que tenga este if else que está en la parte superior.

41
00:02:39,790 --> 00:02:42,790
Así que voy a borrar esta parte del foro Got Password.

42
00:02:46,220 --> 00:02:49,530
En la parte inferior aparece un edd y también lo voy a quitar.

43
00:02:52,500 --> 00:02:55,230
Vamos a la parte superior de aquí.

44
00:02:55,230 --> 00:03:01,110
Vamos a ver que aparece un título que dice Voy a reemplazarlo en vez de lo que vamos a colocar.

45
00:03:02,130 --> 00:03:03,630
Recuperar contraseña.

46
00:03:06,260 --> 00:03:13,850
En la siguiente línea aparece el formulario que está apuntando por defecto a login, el que está apuntando

47
00:03:13,850 --> 00:03:14,570
el deber de login.

48
00:03:14,870 --> 00:03:19,940
Aquí le voy a decir que ahora apunte al Forgotten Password en un método post.

49
00:03:21,290 --> 00:03:26,930
Luego va a comenzar el formulario, los componentes de formulario que aparece, el control, la cajeta,

50
00:03:26,940 --> 00:03:32,510
eso que representa el email y el siguiente es la caja de texto que representa el password.

51
00:03:32,750 --> 00:03:37,280
Voy a eliminar esta caja de texto que representa el password donde necesito.

52
00:03:39,280 --> 00:03:46,850
Luego continúa un texto que me indica así olvidé el password para que me redirija al link al template

53
00:03:46,850 --> 00:03:49,630
de password, pero en este caso voy a modificarlo.

54
00:03:49,630 --> 00:03:51,460
Voy a darle un entrada para que lo pueda hacer bien.

55
00:03:52,090 --> 00:03:53,050
Voy a modificarlo.

56
00:03:53,320 --> 00:03:54,640
Le voy a indicar ahora.

57
00:03:58,370 --> 00:03:59,600
Ya tienes tu password.

58
00:04:04,920 --> 00:04:07,580
Le hago esa pregunta y luego le pongo login.

59
00:04:09,320 --> 00:04:16,220
Y ahora en el href le voy a indicar que me dirija hacia el componente hacia sobre el login.

60
00:04:16,760 --> 00:04:19,220
RL login.

61
00:04:20,980 --> 00:04:26,320
Luego, más abajo, me va a aparecer este botón de tipo submit con el texto de login.

62
00:04:26,350 --> 00:04:28,780
Le voy a poner que diga enviar.

63
00:04:30,750 --> 00:04:36,560
Vamos a borrar todos los cambios del Safe Hall y ahora ejecutamos nuestra página en la parte superior.

64
00:04:36,570 --> 00:04:38,220
Vamos a escribir lo que el 8000 es.

65
00:04:38,220 --> 00:04:41,340
Las account es las for got password.

66
00:04:42,250 --> 00:04:43,300
Y ahora le damos enter.

67
00:04:44,220 --> 00:04:49,530
Y como puedes ver ya me llevó a este nuevo template que se llama Recuperar contraseña, donde tengo

68
00:04:49,530 --> 00:04:55,470
que ingresar al email y se supone que al darle clic al botón Enviar me debería enviar un correo electrónico

69
00:04:55,470 --> 00:04:56,160
a la cuenta.

70
00:04:56,640 --> 00:05:00,690
Vayamos a la función a escribir la lógica de este envío del email.

71
00:05:01,050 --> 00:05:04,020
Vamos a account y ahora a buscar y.

72
00:05:06,630 --> 00:05:09,440
Aquí aparece la función for God password en la parte inferior.

73
00:05:09,890 --> 00:05:10,850
Vamos a darle un espacio.

74
00:05:12,170 --> 00:05:14,890
Y lo primero que tengo que hacer es hacer una evaluación.

75
00:05:14,960 --> 00:05:22,880
Hago indico que si el request method es igual a pos, entonces haga lo siguiente.

76
00:05:25,980 --> 00:05:30,030
Lo primero que voy a hacer es capturar el valor que me está enviando el email.

77
00:05:31,830 --> 00:05:33,990
Por eso hago un request to post.

78
00:05:35,910 --> 00:05:40,410
Aquí le indico que capture el parámetro email que viene del formulario.

79
00:05:41,820 --> 00:05:48,360
Luego vamos a hacer una evaluación para saber si ese email existe en nuestra base de datos y si existe,

80
00:05:48,360 --> 00:05:52,560
entonces es un usuario registrado y podemos proceder a enviar el correo electrónico.

81
00:05:53,810 --> 00:05:56,540
Entonces vamos a hacer un If Account Point Objects.

82
00:05:57,900 --> 00:05:58,800
Paint filter.

83
00:05:59,310 --> 00:06:01,590
Vamos a hacer la búsqueda por el email.

84
00:06:02,010 --> 00:06:09,450
Le digo email iguala al parámetro email que me está enviando el cliente y le mando un EXIF para saber

85
00:06:10,200 --> 00:06:12,930
para que me indica que devuelva si es true o false.

86
00:06:14,420 --> 00:06:15,500
Le pongo dos puntos.

87
00:06:15,890 --> 00:06:19,780
Si el usuario existe, entonces quiero que me lo obtengas.

88
00:06:19,820 --> 00:06:28,850
Le digo que me genere un objeto de tipo usuario user TC donde TC account, punto object, punto get.

89
00:06:29,990 --> 00:06:36,950
Le voy a poner entre dos paréntesis la columna y dos rayas para abajo y el operador exact.

90
00:06:42,500 --> 00:06:45,530
Igual al parámetro que estoy ingresando que es email.

91
00:06:46,670 --> 00:06:47,090
Listo.

92
00:06:47,430 --> 00:06:48,110
Ven con esto.

93
00:06:48,110 --> 00:06:48,890
Ya estoy obteniendo.

94
00:06:48,920 --> 00:06:53,030
Entonces el usuario desde la base de datos, si es que existiera.

95
00:06:53,750 --> 00:06:59,360
Entonces, teniendo el usuario ya puedo proceder a crear la sintaxis para enviar el correo electrónico.

96
00:06:59,570 --> 00:07:01,760
Muy similar a lo que hicimos la clase pasada.

97
00:07:02,780 --> 00:07:04,490
Lo primero, el Current Side.

98
00:07:04,490 --> 00:07:06,010
Recuerdas mi página actual?

99
00:07:06,020 --> 00:07:06,740
Mi dominio.

100
00:07:06,770 --> 00:07:10,010
La página del portal de Current.

101
00:07:10,010 --> 00:07:10,450
Sigue.

102
00:07:12,040 --> 00:07:12,820
Y le paso.

103
00:07:12,820 --> 00:07:13,670
El objeto es.

104
00:07:16,060 --> 00:07:18,820
Lo siguiente el título del email que vas a enviar.

105
00:07:18,820 --> 00:07:19,720
Mail, subject.

106
00:07:20,560 --> 00:07:21,940
Aquí le voy a colocar que sea.

107
00:07:24,380 --> 00:07:28,310
Resetear y resetear password.

108
00:07:32,180 --> 00:07:36,110
El bori, el bori del correo electrónico, el cuerpo, el correo electrónico.

109
00:07:37,160 --> 00:07:39,140
Lo indicar que sea render tu string.

110
00:07:41,270 --> 00:07:46,730
Y para este body también voy a crear un nuevo template HTML que va a estar dentro de account.

111
00:07:47,540 --> 00:07:50,060
Le pongo account reset.

112
00:07:51,380 --> 00:07:52,010
Password.

113
00:07:54,170 --> 00:07:54,500
E-mail.

114
00:07:55,280 --> 00:07:55,940
HTML.

115
00:07:59,300 --> 00:08:00,740
Y cuál es la data que le voy a enviar?

116
00:08:01,100 --> 00:08:02,480
Le voy a enviar el user.

117
00:08:06,530 --> 00:08:08,390
También voy a enviar lo que es el Domain.

118
00:08:12,850 --> 00:08:13,450
Currency.

119
00:08:14,080 --> 00:08:14,620
Currency?

120
00:08:17,230 --> 00:08:22,300
El YYYYY el identificador, que sería un fallo en el safe.

121
00:08:24,680 --> 00:08:25,970
Veis en código.

122
00:08:25,970 --> 00:08:26,660
Debería ser.

123
00:08:28,570 --> 00:08:32,720
Aquí le ponemos un force bytes y le paso.

124
00:08:32,990 --> 00:08:35,150
En este caso el user peca.

125
00:08:38,980 --> 00:08:40,690
También le vamos a pasar el token.

126
00:08:43,500 --> 00:08:45,180
Qué sería un default?

127
00:08:45,180 --> 00:08:46,200
Token Generator.

128
00:08:47,850 --> 00:08:48,840
Llama a su función.

129
00:08:49,770 --> 00:08:50,390
Mac, toquen.

130
00:08:53,160 --> 00:08:54,090
Para el objeto.

131
00:08:54,900 --> 00:08:56,250
Yo era como el final.

132
00:08:56,460 --> 00:09:01,710
Bueno, de esta forma, entonces ya estoy creando el bori del mi correo electrónico para mandarle los

133
00:09:01,710 --> 00:09:04,710
valores que se van a consumir en el template.

134
00:09:06,040 --> 00:09:11,340
Y ahora tengo que indicarle también cuál es el e-mail, el cual va a recibir este correo electrónico.

135
00:09:12,330 --> 00:09:15,810
Le digo que va a ser Ismael el parámetro de Ismael que es ingresando.

136
00:09:19,620 --> 00:09:25,320
Y aquí voy a generar el objeto y mail, set y mail viene desde email message.

137
00:09:27,850 --> 00:09:31,390
Ya que le voy a pasar los parámetros como el mail subject.

138
00:09:33,030 --> 00:09:34,340
También voy a pasar el mes.

139
00:09:35,700 --> 00:09:39,710
Y también el Tour, que es igual al email.

140
00:09:40,080 --> 00:09:41,730
Quién va a recibir el correo electrónico?

141
00:09:43,440 --> 00:09:49,410
Y por último hago un cd y mail punto llamado método send, que es el que ya se encarga de enviar el

142
00:09:49,410 --> 00:09:50,190
correo electrónico.

143
00:09:52,800 --> 00:09:57,960
Pero cuando envíe correo electrónico también quiero que se genere un mensaje en la página diciendo que

144
00:09:57,960 --> 00:10:01,140
este correo está llegando a tu bandeja de entrada.

145
00:10:02,490 --> 00:10:03,720
Así que vamos a crear aquí un

146
00:10:06,480 --> 00:10:07,170
punto.

147
00:10:08,270 --> 00:10:09,590
Success exito.

148
00:10:10,550 --> 00:10:11,540
Hasta que nos ponemos.

149
00:10:12,860 --> 00:10:20,000
El objeto rico es y le pongo el mensaje que quiero indicarle que por acá un email fue enviado a tu bandeja

150
00:10:20,000 --> 00:10:20,570
de entrada.

151
00:10:23,570 --> 00:10:25,790
Para resetear tu password.

152
00:10:27,660 --> 00:10:30,660
Eso es lo que le indico a Mira en esta línea del toque.

153
00:10:32,350 --> 00:10:34,420
En vez de a él, debe haberle puesto dos puntos.

154
00:10:35,190 --> 00:10:37,240
Esto ya le estoy enviando.

155
00:10:37,270 --> 00:10:39,400
Estoy generando ese mensaje de éxito.

156
00:10:40,180 --> 00:10:42,010
Y luego de esto, le voy a indicar que haga un return.

157
00:10:43,120 --> 00:10:43,780
Hacia dónde?

158
00:10:44,710 --> 00:10:47,470
Debe ser hacia el hotel.

159
00:10:47,470 --> 00:10:50,600
Retire la página de login.

160
00:10:53,130 --> 00:11:00,480
Y en caso contrario de que no encontrara este este objeto user en tu base de datos no existirá el usuario

161
00:11:00,480 --> 00:11:01,320
en tu base de datos.

162
00:11:01,770 --> 00:11:03,030
Entonces vamos a hacer un else.

163
00:11:04,990 --> 00:11:06,140
Estos puntos.

164
00:11:08,260 --> 00:11:12,470
Y aquí le vamos a indicar un mensaje de error meses error.

165
00:11:14,250 --> 00:11:20,190
Le paso el request y aquí le indico que la cuenta de usuario no existe.

166
00:11:22,910 --> 00:11:24,640
Y quiero que me haga un tour direct.

167
00:11:24,650 --> 00:11:29,450
Hace Hakeem que se quede en la página, que en este caso es For God Password.

168
00:11:35,310 --> 00:11:42,540
Ahora lo que necesitamos hacer es crear ese tema de password, email, punto html, pero ese password

169
00:11:42,540 --> 00:11:48,360
y mail también va a tener una función de tipo dev para procesar el pedido, así que vamos a aprovechar

170
00:11:48,360 --> 00:11:49,710
que estamos dentro de este archivo.

171
00:11:49,710 --> 00:11:53,610
Buscar API para crear esta función.

172
00:11:54,480 --> 00:11:56,010
Voy a indicar acá reset.

173
00:11:57,360 --> 00:12:00,030
Supongo que Harry SSID, password.

174
00:12:01,470 --> 00:12:02,310
Pero yo trabajo.

175
00:12:04,250 --> 00:12:06,350
Esta es la función que va a procesar ese template.

176
00:12:08,160 --> 00:12:09,350
Le ponemos el request.

177
00:12:10,500 --> 00:12:16,680
Cuando el usuario reciba un correo electrónico dentro del bot y de este correo va a aparecer un link.

178
00:12:17,310 --> 00:12:24,060
Cuando tú le des click a ese link es que se va a ejecutar esta función que se llama password.

179
00:12:24,090 --> 00:12:24,750
Vale, date.

180
00:12:25,920 --> 00:12:32,280
Bien, entonces lo que vamos a hacer aquí es indicarle que ese password validez va a tener un parámetro

181
00:12:32,280 --> 00:12:32,730
request.

182
00:12:33,090 --> 00:12:39,420
También va a tener un parámetro de tipo UI de seis cuatro.

183
00:12:42,570 --> 00:12:44,460
También va a tener un parámetro ético token.

184
00:12:47,320 --> 00:12:56,500
Y lo que tenemos que hacer aquí es crear un método para poder capturar el geoide, el parámetro decodificado

185
00:12:56,500 --> 00:12:57,490
y también el user.

186
00:12:58,590 --> 00:12:59,730
Por eso hacemos un trick.

187
00:13:01,160 --> 00:13:02,930
O sea, dale un poco de espaciado aquí.

188
00:13:05,010 --> 00:13:09,690
Y le pongo un ID igual a Wireless Safe.

189
00:13:12,500 --> 00:13:12,920
Veis.

190
00:13:13,130 --> 00:13:14,630
TQD En este caso.

191
00:13:16,350 --> 00:13:18,270
Para que codifique el wadi.

192
00:13:19,330 --> 00:13:20,320
B 64.

193
00:13:20,320 --> 00:13:21,760
Que es ingresando como parámetro.

194
00:13:23,710 --> 00:13:24,760
Punto de code.

195
00:13:28,530 --> 00:13:31,400
También voy a obtener el usuario desde Laurel.

196
00:13:31,410 --> 00:13:32,880
Vamos a poner acá Account.

197
00:13:35,680 --> 00:13:36,340
Punto.

198
00:13:37,690 --> 00:13:41,050
Vamos a de default manager.

199
00:13:42,670 --> 00:13:43,690
Punto guet.

200
00:13:45,590 --> 00:13:49,010
Y pasándole el PK igual al YYYYY.

201
00:13:52,240 --> 00:13:56,620
En caso contrario, que haya problemas que no detecte que no encuentre estos valores.

202
00:13:56,980 --> 00:13:58,360
Voy a lanzar una excepción.

203
00:14:00,380 --> 00:14:03,470
Desde aquí le ponemos que le sesión tenga un type error.

204
00:14:05,000 --> 00:14:05,930
Vale, error.

205
00:14:07,730 --> 00:14:08,430
Overflow.

206
00:14:08,450 --> 00:14:08,960
Error.

207
00:14:11,510 --> 00:14:15,350
Y también does not exist.

208
00:14:17,160 --> 00:14:19,980
Damos dos puntos, en este caso el user.

209
00:14:21,100 --> 00:14:22,420
Sería igual anoche.

210
00:14:25,620 --> 00:14:26,160
Listo.

211
00:14:27,440 --> 00:14:29,480
A continuación vamos a hacer un if.

212
00:14:29,810 --> 00:14:32,850
Si el usuario, el objeto usuario es not name.

213
00:14:32,880 --> 00:14:36,950
Si no es nulo, es None and default.

214
00:14:36,950 --> 00:14:37,280
Token.

215
00:14:37,280 --> 00:14:38,870
Generator punto.

216
00:14:38,900 --> 00:14:39,620
Check token.

217
00:14:42,610 --> 00:14:43,240
Existe.

218
00:14:43,330 --> 00:14:45,970
Vamos a poner parámetros de user y toque.

219
00:14:47,170 --> 00:14:50,020
Cuando se compruebe esto, entonces.

220
00:14:51,020 --> 00:14:53,480
Creo que el rico es sexo.

221
00:14:55,280 --> 00:14:59,300
En Lloyd que sea igual al Lloyd que capturado.

222
00:14:59,300 --> 00:15:01,130
Anteriormente en la sección del Tri.

223
00:15:04,540 --> 00:15:05,770
Y si esto sucede?

224
00:15:05,770 --> 00:15:08,590
Entonces quiero que aparezca un mensaje.

225
00:15:09,340 --> 00:15:10,170
Vamos a poner la carne.

226
00:15:10,410 --> 00:15:12,670
Es punto Success.

227
00:15:14,680 --> 00:15:17,350
Se puede acceder al objeto y el mensaje que diga.

228
00:15:17,680 --> 00:15:18,640
Por favor.

229
00:15:19,840 --> 00:15:22,210
Resetea tu password.

230
00:15:25,290 --> 00:15:28,200
Y luego de esto quiero que me redirecciones a otra página.

231
00:15:28,710 --> 00:15:31,400
Redirige a una página.

232
00:15:31,560 --> 00:15:33,210
Una página que aún no existe.

233
00:15:33,210 --> 00:15:34,740
Que se va a llamar password.

234
00:15:34,980 --> 00:15:40,410
Que realmente va a ser un formulario donde el usuario va a ingresar el nuevo password que quiere que

235
00:15:40,410 --> 00:15:41,280
tengas en cuenta.

236
00:15:41,960 --> 00:15:50,880
Bien, pero si al darle clic al link se detecta de que este este link ya expiró o este link relacionado

237
00:15:50,880 --> 00:15:52,410
a una cuenta de usuario no existe.

238
00:15:52,410 --> 00:15:53,700
No existe la cuenta de usuario.

239
00:15:54,360 --> 00:15:56,640
Entonces quiero que haga lo siguiente que haga un else.

240
00:15:58,240 --> 00:16:03,940
Qué me genere un mensaje, mensajes, pero un mensaje de error que le voy a poner request.

241
00:16:05,490 --> 00:16:07,050
Y el mensaje tiene que ser.

242
00:16:08,330 --> 00:16:10,370
El link ha expirado.

243
00:16:12,900 --> 00:16:15,630
Y quiero que me redirecciones hacia el.

244
00:16:21,950 --> 00:16:23,320
Vamos a revisar la función.

245
00:16:23,330 --> 00:16:24,380
Todo parece bien.

246
00:16:25,100 --> 00:16:27,380
Acá hay un pequeño detalle en el request sesión.

247
00:16:28,590 --> 00:16:31,170
Este yyyy tiene que ir entre apóstrofes.

248
00:16:31,980 --> 00:16:32,430
Listo.

249
00:16:33,390 --> 00:16:40,470
Bien, pero aquí estamos hablando de que si esto es correcto, si yo al procesar el link detecto que

250
00:16:40,830 --> 00:16:46,620
el token y el user que están incorporados codificados dentro de este link son correctos y existen en

251
00:16:46,620 --> 00:16:47,270
mis sistemas.

252
00:16:47,580 --> 00:16:54,000
Entonces lo que va a suceder es que el link me tiene que llevar a este formulario llamado password.

253
00:16:55,220 --> 00:16:58,940
Entonces vamos a tener que crear un template para este formulario.

254
00:16:59,240 --> 00:17:05,330
Y aparte de ese template, también tenemos que crear su URL, su path y también su función.

255
00:17:05,960 --> 00:17:12,280
Y ya que estamos dentro de este archivo, buscar PY y vamos a aprovechar para también crearle su función

256
00:17:12,300 --> 00:17:16,490
aquí la función que procese el formulario de recibir password.

257
00:17:17,240 --> 00:17:21,020
Por eso aquí voy a escribir Def recibe password.

258
00:17:23,610 --> 00:17:25,230
Iba a recibir un objeto request.

259
00:17:27,650 --> 00:17:28,900
Los datos.

260
00:17:28,910 --> 00:17:34,430
Los componentes de este formulario van a enviarse a esta función mediante el método Post.

261
00:17:35,390 --> 00:17:38,420
Por eso voy a hacer aquí un if request method.

262
00:17:38,450 --> 00:17:39,380
Es igual a post.

263
00:17:44,970 --> 00:17:45,600
Dos puntos.

264
00:17:46,320 --> 00:17:50,520
Entonces captura el valor del password que te estén viendo el cliente.

265
00:17:51,870 --> 00:17:57,990
Le pongo acá la variable password y está bien ese captura desde el request punto post.

266
00:18:00,390 --> 00:18:01,240
Entre corchetes.

267
00:18:04,230 --> 00:18:04,800
Password.

268
00:18:06,240 --> 00:18:09,090
También creo que capture el confirm password.

269
00:18:11,060 --> 00:18:12,470
Rico un post.

270
00:18:14,820 --> 00:18:16,980
Y este se va a llamar config password.

271
00:18:19,860 --> 00:18:21,180
Y aquí hago una lógica.

272
00:18:21,480 --> 00:18:22,020
Si.

273
00:18:24,360 --> 00:18:25,020
Password.

274
00:18:27,060 --> 00:18:29,940
Es igual a conseguir password.

275
00:18:31,790 --> 00:18:34,130
Entonces quiero que haga lo siguiente.

276
00:18:34,580 --> 00:18:40,010
Quiero que capture el YYYYY desde el request Session.

277
00:18:40,860 --> 00:18:41,210
Punto.

278
00:18:41,210 --> 00:18:41,630
Get.

279
00:18:42,020 --> 00:18:43,490
Este va a ser el Lloyd.

280
00:18:47,370 --> 00:18:50,700
También que me captura el usuario Yusef desde acá.

281
00:18:53,090 --> 00:18:55,480
Punto Object.

282
00:18:55,510 --> 00:18:57,110
Punto Get.

283
00:18:58,260 --> 00:19:03,480
Con el filtro del PK, igual la calidad primaria va a ser igual aquí en Buscando al geoide.

284
00:19:06,210 --> 00:19:09,450
Y luego que he encontrado el objeto usuario voy a aceptarle el nuevo password.

285
00:19:09,450 --> 00:19:13,770
Por eso hago un user punto set raya para abajo password.

286
00:19:17,180 --> 00:19:19,060
Desde que le colocamos el password.

287
00:19:19,720 --> 00:19:20,110
Listo.

288
00:19:21,830 --> 00:19:25,850
Y aquí le coloco el user seis para que se almacene en la base de datos.

289
00:19:27,320 --> 00:19:29,270
Y una vez que ya se almacenó correctamente.

290
00:19:30,490 --> 00:19:31,840
Voy a agregarle un message.

291
00:19:31,840 --> 00:19:33,460
Es success.

292
00:19:33,490 --> 00:19:35,560
Un mensaje que devuelva al cliente.

293
00:19:37,350 --> 00:19:38,910
Indicándole que todo fue correcto.

294
00:19:40,020 --> 00:19:40,890
El password.

295
00:19:43,440 --> 00:19:45,930
Se recetó correctamente.

296
00:19:49,440 --> 00:19:51,210
Y le digo que me retorne hacia.

297
00:19:52,350 --> 00:19:53,310
Directo hacia.

298
00:19:55,310 --> 00:19:56,360
En la página login.

299
00:19:58,310 --> 00:20:04,670
Pero esto va a suceder solo si el password es igual al password que estás confirmando que son los campos,

300
00:20:04,670 --> 00:20:06,530
las cajas de texto que están en tu formulario.

301
00:20:08,100 --> 00:20:10,980
En caso contrario que no sea, no sean iguales.

302
00:20:12,530 --> 00:20:14,060
Entonces creo que envío un error.

303
00:20:14,690 --> 00:20:15,170
Error?

304
00:20:18,600 --> 00:20:19,170
Y le digo.

305
00:20:20,880 --> 00:20:22,770
El password no concuerda.

306
00:20:27,130 --> 00:20:29,350
Reconoció el poder de confirmación no concuerda.

307
00:20:31,010 --> 00:20:33,170
Y le dio un tour directo hacia.

308
00:20:34,980 --> 00:20:36,360
El recibir password.

309
00:20:40,170 --> 00:20:41,040
Lo tenemos listo.

310
00:20:41,310 --> 00:20:45,570
Bueno, me falta un mes para este if en la parte superior, que es el método Boss.

311
00:20:46,260 --> 00:20:47,220
Vamos a revisarlo.

312
00:20:48,620 --> 00:20:53,530
Ahí le ponemos L y le digo que haga un return render.

313
00:20:55,760 --> 00:20:59,840
Hacia el template account es las

314
00:21:02,570 --> 00:21:04,610
password a html.

315
00:21:06,650 --> 00:21:14,000
A continuación tenemos que crear los pads para ambas funciones, para password y para recibir password.

316
00:21:14,600 --> 00:21:19,880
Entonces vayamos al archivo que está en la carpeta account que se llama JSP y.

317
00:21:21,320 --> 00:21:25,550
Ya había creado anteriormente el path para For God Password.

318
00:21:26,090 --> 00:21:27,710
Ahora vamos a crear otro.

319
00:21:28,070 --> 00:21:36,680
Voy a copiar este Forgotten Password ya que lo pego y creamos otro para lo que es el Rising Password

320
00:21:36,680 --> 00:21:37,310
validarte.

321
00:21:38,240 --> 00:21:39,710
Así que aquí eliminamos esto.

322
00:21:40,940 --> 00:21:44,950
Le ponemos reset password paridad.

323
00:21:45,770 --> 00:21:50,450
Lo tenemos listo, pero este va a recibir dos parámetros.

324
00:21:50,960 --> 00:21:55,900
Así que después del slash le ponemos el primer parámetro, que es el YYYYY.

325
00:21:56,270 --> 00:21:56,990
Seis cuatro.

326
00:21:58,590 --> 00:22:01,110
Es el segundo parámetro que es el token.

327
00:22:02,990 --> 00:22:03,950
Y terminó con un.

328
00:22:04,370 --> 00:22:05,300
Nunca te olvidas de eso.

329
00:22:07,020 --> 00:22:09,270
Y el nombre de la función es.

330
00:22:10,360 --> 00:22:10,720
Virus.

331
00:22:10,720 --> 00:22:11,410
Punto.

332
00:22:12,220 --> 00:22:15,280
Recibe password reset.

333
00:22:15,280 --> 00:22:16,750
Password valida.

334
00:22:17,200 --> 00:22:17,710
Ahí esta.

335
00:22:19,060 --> 00:22:20,570
Lo repetimos en la parte final.

336
00:22:20,590 --> 00:22:22,330
Copio ya que lo repito.

337
00:22:24,510 --> 00:22:28,170
Bien, vamos ahora a trabajar con el siguiente que es el password.

338
00:22:28,170 --> 00:22:32,010
Nada más voy a copiar de este for God password para crear el siguiente path.

339
00:22:34,140 --> 00:22:34,410
Aquí.

340
00:22:34,410 --> 00:22:35,370
Lo estoy creando.

341
00:22:35,520 --> 00:22:36,630
Este se va a llamar.

342
00:22:38,540 --> 00:22:39,230
Recibe.

343
00:22:40,510 --> 00:22:41,110
Password.

344
00:22:43,950 --> 00:22:45,030
Aquí le pongo el las.

345
00:22:46,960 --> 00:22:50,050
El nombre de la función es Rising Password también.

346
00:22:51,130 --> 00:22:51,580
Punto.

347
00:22:53,230 --> 00:22:53,800
Password.

348
00:22:55,400 --> 00:22:56,090
Para un momento.

349
00:22:57,840 --> 00:23:00,570
Creo que también lo repito recibe password.

350
00:23:03,640 --> 00:23:05,180
Hay que tener cuidado con las PC.

351
00:23:05,230 --> 00:23:05,830
Aquí es.

352
00:23:06,750 --> 00:23:07,890
P mayúscula.

353
00:23:09,120 --> 00:23:10,320
Si es P mayúscula.

354
00:23:11,850 --> 00:23:13,680
Aquí también debería ser P mayúscula.

355
00:23:14,700 --> 00:23:17,790
En esta sección del PATH, también debería ser P mayúscula.

356
00:23:18,150 --> 00:23:18,300
Si.

357
00:23:19,320 --> 00:23:19,560
Bien.

358
00:23:19,800 --> 00:23:20,340
Lo tenemos.

359
00:23:20,340 --> 00:23:20,820
Listo.

360
00:23:20,820 --> 00:23:22,720
Ahora vayamos a bus nuevamente.

361
00:23:22,770 --> 00:23:23,250
Bus, punto.

362
00:23:23,310 --> 00:23:23,610
Pic.

363
00:23:23,610 --> 00:23:24,780
Está es la carpeta account.

364
00:23:26,660 --> 00:23:33,500
Bien, ya he creado los paths tanto para password como para Rising Password Valid como para el password

365
00:23:33,500 --> 00:23:34,310
con P mayúscula.

366
00:23:35,310 --> 00:23:38,160
Pero ahora me falta crear los templates.

367
00:23:38,970 --> 00:23:45,570
En este caso necesito un template que represente al rey sit password validado y otro template para el

368
00:23:45,840 --> 00:23:46,380
password.

369
00:23:46,530 --> 00:23:47,200
Comencemos.

370
00:23:47,220 --> 00:23:53,370
Para este recibe passwords template que va a representar el cuerpo del email que le entregaremos al

371
00:23:53,370 --> 00:23:53,940
cliente.

372
00:23:55,010 --> 00:24:01,130
El nombre del template es password email, por si acaso lo habíamos definido dentro del método Forgotten

373
00:24:01,130 --> 00:24:01,730
Password.

374
00:24:02,390 --> 00:24:03,470
Voy a copiar ese nombre.

375
00:24:06,650 --> 00:24:10,730
Y vamos hacia la carpeta Templates y dentro de templates en Account.

376
00:24:11,830 --> 00:24:13,870
No sabía que había dicho Newfield.

377
00:24:15,380 --> 00:24:15,920
De Acab.

378
00:24:15,920 --> 00:24:19,490
Acá vamos a ponerle el nombre password y mail, punto html.

379
00:24:20,030 --> 00:24:20,840
Le damos enter.

380
00:24:22,850 --> 00:24:26,300
Y como medida de seguridad, vamos a crear aquí un.

381
00:24:28,320 --> 00:24:29,460
Auto escape.

382
00:24:30,550 --> 00:24:31,060
End of.

383
00:24:34,030 --> 00:24:35,400
Entonces aquí cerramos con.

384
00:24:38,430 --> 00:24:39,540
And out escape.

385
00:24:42,020 --> 00:24:42,470
También.

386
00:24:42,470 --> 00:24:43,370
Voy a colgar aquí.

387
00:24:43,910 --> 00:24:44,300
Hola.

388
00:24:46,260 --> 00:24:47,840
Aquí le ponemos el user.

389
00:24:47,840 --> 00:24:49,580
Punto First name.

390
00:24:55,190 --> 00:24:56,540
Como lo solicitaste.

391
00:24:56,580 --> 00:24:59,630
Ese es el texto que va a llegar al correo como lo solicitaste.

392
00:25:00,740 --> 00:25:02,660
Dale click al link.

393
00:25:05,270 --> 00:25:07,700
Para poder resetear tu password.

394
00:25:11,520 --> 00:25:15,090
Así que le ponemos el link http dos puntos es Las Islas.

395
00:25:17,290 --> 00:25:17,860
Domain.

396
00:25:19,060 --> 00:25:19,960
Doble llave.

397
00:25:21,310 --> 00:25:29,320
En una llave le ponemos entre signo de porcentaje, el path que va a procesar este estos datos dentro

398
00:25:29,320 --> 00:25:31,750
de un formulario que es el password.

399
00:25:34,010 --> 00:25:34,370
Válida.

400
00:25:35,180 --> 00:25:37,100
Y va a tener dos parámetros que enviar.

401
00:25:37,820 --> 00:25:40,220
El id b 64.

402
00:25:42,010 --> 00:25:42,880
Igual la YYYY.

403
00:25:43,780 --> 00:25:45,160
Y también el toque.

404
00:25:47,660 --> 00:25:48,620
Igual a toque.

405
00:25:50,760 --> 00:25:51,810
Eso sería todo.

406
00:25:52,740 --> 00:25:54,930
Vamos a borrar los cambios de Falstaff Hall.

407
00:25:55,800 --> 00:25:56,020
Mira.

408
00:25:56,020 --> 00:25:57,510
Pero me falta todavía más.

409
00:25:57,540 --> 00:25:59,010
Volvamos a Blues.

410
00:25:59,070 --> 00:25:59,640
Un momento.

411
00:26:00,850 --> 00:26:08,530
Y dentro del virus cuando entra al receptor, que realmente es cuando el usuario le da click al link

412
00:26:08,530 --> 00:26:09,730
que le llegó al correo electrónico.

413
00:26:10,660 --> 00:26:16,450
Si todo es correcto, va a llevarte a ese template que se llama password.

414
00:26:17,730 --> 00:26:21,090
Entonces significa que también tenemos que crear este password.

415
00:26:22,410 --> 00:26:23,280
Vamos a copiarlo.

416
00:26:25,530 --> 00:26:27,900
Y vamos otra vez a Templates Account.

417
00:26:30,120 --> 00:26:31,130
Reemplace Account.

418
00:26:31,140 --> 00:26:32,880
Vamos a darle clic derecho New File.

419
00:26:34,460 --> 00:26:39,950
De que le decimos que me genere un template que se llama password punto a html y le vamos a entrar.

420
00:26:40,370 --> 00:26:46,310
Pero como la interfaz gráfica del password es muy similar a la que hemos creado antes para el foro Got

421
00:26:46,320 --> 00:26:52,640
Password, vamos a darle doble click un momento al archivo for God Password punto HTML y voy a copiar

422
00:26:52,640 --> 00:26:53,870
toda su interfaz gráfica.

423
00:26:53,960 --> 00:26:58,310
Lo copiamos y volvemos al password y acá lo vamos a pegar.

424
00:27:00,920 --> 00:27:03,610
Comenzamos por editar el contenido.

425
00:27:03,620 --> 00:27:05,240
Aquí se recupera la contraseña.

426
00:27:05,540 --> 00:27:06,560
Yo le voy a poner.

427
00:27:07,890 --> 00:27:09,300
Resetear password.

428
00:27:13,120 --> 00:27:19,680
Aquí aparece también un formulario que te está llevando a hacer For Gold Password, la función for Gold

429
00:27:19,690 --> 00:27:24,010
Password, pero en este caso yo quiero que me lleve hacia el Rishi Password.

430
00:27:26,970 --> 00:27:28,040
Está en Método Pozo.

431
00:27:28,040 --> 00:27:29,070
Eso es correcto también.

432
00:27:30,150 --> 00:27:31,830
Vamos a los campos del formulario.

433
00:27:32,310 --> 00:27:35,100
Tengo un primer campo que ese tipo.

434
00:27:36,600 --> 00:27:37,130
Email.

435
00:27:37,440 --> 00:27:38,400
Voy a cambiarlo.

436
00:27:38,670 --> 00:27:40,860
Quiero que sea de tipo password.

437
00:27:41,340 --> 00:27:44,340
Entonces acá en vez de email, le pongo password.

438
00:27:47,000 --> 00:27:48,920
El Klaus es un control.

439
00:27:48,950 --> 00:27:50,000
El placeholder.

440
00:27:50,330 --> 00:27:51,350
Aquí ese email.

441
00:27:52,420 --> 00:27:53,340
Se lo voy a poner acá.

442
00:27:53,350 --> 00:27:56,260
Crear password y el nombre.

443
00:27:57,540 --> 00:27:58,680
Va a ser password.

444
00:28:02,970 --> 00:28:08,790
Y voy a crear otro for group porque necesito otra caja de texto que represente la información de la

445
00:28:08,790 --> 00:28:10,050
confirmación del password.

446
00:28:10,380 --> 00:28:11,280
Copiamos esto.

447
00:28:12,900 --> 00:28:15,180
Vamos a un espaciado y pegamos.

448
00:28:17,300 --> 00:28:24,140
Va a ser de tipo password también for control placeholder aquí sería confirmar password.

449
00:28:28,120 --> 00:28:29,620
Y el nombre vamos a ponerle.

450
00:28:29,630 --> 00:28:35,470
Voy a maximizar mi archivo para que lo veas mejor y aquí le voy a poner confirm password.

451
00:28:36,670 --> 00:28:37,030
Esto.

452
00:28:41,990 --> 00:28:48,770
He aquí este texto que dice ya tienes tu password login, esto lo voy a eliminar, lo necesito para

453
00:28:48,770 --> 00:28:49,460
este formulario.

454
00:28:49,970 --> 00:28:51,290
Luego continúa el botón.

455
00:28:52,670 --> 00:28:53,420
En este botón.

456
00:28:53,420 --> 00:28:54,590
Voy a cambiarle solo.

457
00:28:54,590 --> 00:28:56,450
El label dice enviar.

458
00:28:57,200 --> 00:28:58,050
Lo voy a poner acá.

459
00:28:58,070 --> 00:28:58,880
Resetear.

460
00:28:59,780 --> 00:29:05,210
Entonces ya he creado con esto las interfaces gráficas, los templates para recibir password, email

461
00:29:05,300 --> 00:29:06,890
y password for God password.

462
00:29:08,090 --> 00:29:13,340
También he creado los templates al interior del URLs de la carpeta account.

463
00:29:14,750 --> 00:29:19,280
Un pequeño detalle aquí dentro del password valide yo y div cuatro.

464
00:29:19,610 --> 00:29:23,090
Eso está perfecto, pero para el toque aquí le puse toque.

465
00:29:23,120 --> 00:29:24,500
Debería ser token con M.

466
00:29:24,500 --> 00:29:26,420
Al final hay que tener siempre mucho cuidado aquí.

467
00:29:27,460 --> 00:29:35,290
Ahora sí vamos a revisar también el archivo buscar y he creado las funciones para recibir password.

468
00:29:36,630 --> 00:29:38,160
Aquí hay un pequeño detalle.

469
00:29:38,580 --> 00:29:43,410
Miren esa línea en la función de recibir password válida en el ESP.

470
00:29:44,100 --> 00:29:46,440
Estoy colocándole el logo de los dos puntos.

471
00:29:46,440 --> 00:29:47,100
Eso está mal.

472
00:29:47,490 --> 00:29:49,380
Y los dos puntos van al final de la línea.

473
00:29:50,510 --> 00:29:56,390
Vamos a darle una última revisada a la parte superior a que aparece la función For Got Password.

474
00:29:57,200 --> 00:30:04,910
Y aquí, en esta línea, después de este If Object Filter, le estoy haciendo un user account object

475
00:30:05,390 --> 00:30:08,030
a que me faltó la C Objects?

476
00:30:09,490 --> 00:30:11,080
Get email exact.

477
00:30:11,620 --> 00:30:17,140
También vamos a notar que dentro de esta función aparece este set, email y mail message que tiene tres

478
00:30:17,140 --> 00:30:17,830
parámetros.

479
00:30:18,100 --> 00:30:23,980
El título del mensaje, el correo electrónico, el cuerpo del mensaje y a quién va a ir dirigido este

480
00:30:23,980 --> 00:30:24,370
email?

481
00:30:24,820 --> 00:30:26,690
Pero este mensaje no existe realmente.

482
00:30:26,710 --> 00:30:30,220
Debería ser el body, porque este es el cuerpo del mensaje.

483
00:30:31,120 --> 00:30:34,420
Así que en vez de msg aquí le vamos a escribir body.

484
00:30:35,870 --> 00:30:37,500
Y ahora si vamos a borrar los cambios.

485
00:30:37,520 --> 00:30:38,690
Menú Field Safe all.

486
00:30:38,720 --> 00:30:40,310
Y ahora vamos a la página local.

487
00:30:40,490 --> 00:30:46,970
8000 account recibe password y como puedes ver ya me aparece la interfaz gráfica para poder resetear

488
00:30:46,970 --> 00:30:47,600
un password.

489
00:30:48,670 --> 00:30:52,300
Pero vamos a hacer la simulación de que todo está ocurriendo bien.

490
00:30:52,690 --> 00:30:54,880
Vamos a ir a darle click a este login.

491
00:30:56,410 --> 00:31:02,680
Voy a suponer que no me acuerdo de mi password para el usuario BASIC tres no se hace el basic tres nada

492
00:31:02,680 --> 00:31:05,050
más basic tres email punto com.

493
00:31:06,230 --> 00:31:07,280
Voy a darle click a este.

494
00:31:07,310 --> 00:31:08,630
Olvidaste tu password.

495
00:31:10,620 --> 00:31:15,570
Algo me está llevando acá hacia la página que corresponde al reseteo del password.

496
00:31:15,840 --> 00:31:18,270
Tengo que entrar un momento a la página de login.

497
00:31:19,680 --> 00:31:21,120
Estamos dentro de Atton.

498
00:31:21,150 --> 00:31:23,910
Vamos a ir a la carpeta Templates y Account.

499
00:31:24,600 --> 00:31:26,940
Y aquí me aparece un punto HTML.

500
00:31:27,840 --> 00:31:32,880
Vamos a buscar ahora el botón para el link para el Forgotten Password.

501
00:31:33,140 --> 00:31:34,290
Olvidaste tu password.

502
00:31:34,320 --> 00:31:34,890
Este es.

503
00:31:36,130 --> 00:31:38,830
Aquí no tengo el href apuntando a nada.

504
00:31:39,430 --> 00:31:41,200
Le voy a poner aquí unas llaves.

505
00:31:41,650 --> 00:31:47,680
También le puse uno de porcentajes la URL y le digo que me lleve hacia.

506
00:31:49,340 --> 00:31:50,870
El template for God password.

507
00:31:52,430 --> 00:31:53,350
Lo tenemos listo.

508
00:31:53,360 --> 00:31:56,570
Voy a darle Mayfield Safe Hall y volvemos a probar.

509
00:31:57,910 --> 00:31:59,140
Estoy nuevamente en la página.

510
00:31:59,140 --> 00:32:00,250
Vamos a refrescar.

511
00:32:00,700 --> 00:32:01,600
Todo perfecto.

512
00:32:02,810 --> 00:32:03,890
Y le damos al clic.

513
00:32:03,920 --> 00:32:05,120
Olvidaste tu password.

514
00:32:06,350 --> 00:32:12,830
Ahora si ya me llevó a la página de Forgotten Password, aquí voy a colocar el email y tres.

515
00:32:14,470 --> 00:32:15,310
Arroba gmail.

516
00:32:15,310 --> 00:32:15,940
Punto com.

517
00:32:17,670 --> 00:32:19,410
Y le damos al clic al botón Enviar.

518
00:32:21,020 --> 00:32:26,450
Se está procesando y me dice un email fue enviado a tu bandeja de entrada para resetear tu password.

519
00:32:26,780 --> 00:32:27,710
Perfecto.

520
00:32:27,710 --> 00:32:29,480
Vamos a revisar nuestro correo electrónico.

521
00:32:30,480 --> 00:32:33,630
Y como puedes ver ya me llegó el correo electrónico.

522
00:32:33,630 --> 00:32:39,420
El título es resetear password y que me dice Hola Nestor, como lo solicitaste?

523
00:32:39,720 --> 00:32:42,480
Dale click al link para poder resetear tu password.

524
00:32:42,900 --> 00:32:44,880
Bien, demosle click a este link.

525
00:32:47,120 --> 00:32:51,440
Listo, ya me llevó automáticamente a la pantalla de resetear password.

526
00:32:51,710 --> 00:32:53,210
Vamos a crear un nuevo password.

527
00:32:54,720 --> 00:32:57,870
Ya inserté el nuevo password que yo quiero para mi cuenta de tres.

528
00:32:58,200 --> 00:33:00,000
Vamos a darle clic en el botón Resetear.

529
00:33:01,650 --> 00:33:04,230
Y perfecto, ya se actualizó mi password.

530
00:33:05,730 --> 00:33:07,010
Vamos a probar si es correcto.

531
00:33:07,020 --> 00:33:08,700
Voy a hacer el login con el nuevo password.

532
00:33:09,600 --> 00:33:13,530
Ingrese el nuevo password, voy a darle clic a Login y perfecto!

533
00:33:13,770 --> 00:33:18,810
Ya me he logueado exitosamente, como puedes ver en la tienda ya me aparece el nombre.

534
00:33:19,410 --> 00:33:25,440
Con esto hemos concluido el proceso de resetear un password por medio de envíos de correo electrónicos

535
00:33:25,440 --> 00:33:27,900
y links de reseteo automático.
