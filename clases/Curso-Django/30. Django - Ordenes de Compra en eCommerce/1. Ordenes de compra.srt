1
00:00:00,330 --> 00:00:04,020
En este capítulo vamos a trabajar en la creación de la orden de compra.

2
00:00:04,290 --> 00:00:10,260
Es decir, estando dentro de la página de checkout, cuando lee clic a ordenar los productos, comenzaría

3
00:00:10,260 --> 00:00:12,480
la creación de este documento.

4
00:00:12,750 --> 00:00:17,490
Pero antes de hablar de la transacción y creación de la orden de compra, primero tenemos que hablar

5
00:00:17,490 --> 00:00:21,720
de las entidades tablas que darán soporte a este proceso.

6
00:00:22,500 --> 00:00:26,060
Una orden de compra principalmente tendrá estos atributos.

7
00:00:26,070 --> 00:00:33,210
Por ejemplo, un número de orden, el nombre, el apellido, el teléfono, el email y la dirección del

8
00:00:33,210 --> 00:00:35,520
cliente que está haciendo esta orden.

9
00:00:35,790 --> 00:00:42,480
También el total a pagar el impuesto, a pagar el estatus de la orden, el IP, el número de IP desde

10
00:00:42,480 --> 00:00:44,550
el cual se está haciendo la orden.

11
00:00:44,850 --> 00:00:46,560
También la descripción de la orden.

12
00:00:46,920 --> 00:00:53,190
También un estatus para saber si la orden ya fue confirmada, la fecha de la creación de la Orden y

13
00:00:53,190 --> 00:00:55,230
también si la orden fue actualizada.

14
00:00:55,350 --> 00:01:00,510
Crearemos un campo fecha que represente este valor que sería Update at.

15
00:01:01,850 --> 00:01:08,270
Cuando un cliente crea una orden de compra, no la crea solo con un solo producto, sino que pueden

16
00:01:08,270 --> 00:01:11,360
existir varios productos dentro de esta orden.

17
00:01:11,630 --> 00:01:16,580
Por este motivo, necesitamos crear otra entidad que represente esta relación.

18
00:01:18,040 --> 00:01:22,550
Tendremos entonces una entidad adicional que llamaremos orden producto.

19
00:01:23,400 --> 00:01:30,300
Esta tabla se encargará de almacenar la información del producto que se ordenó que el cliente está comprando

20
00:01:30,720 --> 00:01:36,810
y la relación entre orden y orden producto sería de uno a muchos.

21
00:01:37,290 --> 00:01:41,730
Una orden puede tener muchos productos.

22
00:01:42,450 --> 00:01:48,690
También tendremos otra tabla que represente el pago que haga el cliente por los productos que quiere

23
00:01:48,690 --> 00:01:49,170
comprar.

24
00:01:49,890 --> 00:01:56,910
Esta tabla la llamaremos Payment, que en inglés significa pagos de la misma forma como pasó con orden.

25
00:01:57,180 --> 00:02:03,990
La relación entre esta tabla payment y orden producto será de uno a muchos.

26
00:02:06,280 --> 00:02:10,750
Un payment puede contener una o varias órdenes de producto.

27
00:02:12,520 --> 00:02:20,140
Algo que también haremos es transformar todas las líneas del carrito de compras al modelo orden producto.

28
00:02:21,340 --> 00:02:27,220
Esto es básicamente lo que tendremos que construir para realizar el proceso de la transacción de una

29
00:02:27,220 --> 00:02:27,910
orden de compra.

30
00:02:28,060 --> 00:02:32,890
Comencemos creando estas tablas dentro de nuestra base de datos en rango.

31
00:02:33,160 --> 00:02:38,590
Pero para crear esas tablas, recuerda que primero tenemos que crear una aplicación dentro de nuestro

32
00:02:38,590 --> 00:02:39,160
proyecto.

33
00:02:39,670 --> 00:02:44,290
Hemos abierto Python dentro de Python y también hemos abierto el batch que se está ejecutando.

34
00:02:44,290 --> 00:02:45,130
Voy a detenerlo.

35
00:02:46,180 --> 00:02:47,440
También limpió la consola.

36
00:02:49,070 --> 00:02:57,590
Íbamos a escribir Python, espacio manage y espacio start up.

37
00:03:00,400 --> 00:03:03,700
Y le pongo el nombre a esta nueva app que va a ser orders.

38
00:03:04,450 --> 00:03:05,410
Órdenes de compra.

39
00:03:06,460 --> 00:03:07,330
Le damos enter.

40
00:03:08,730 --> 00:03:13,470
Y vamos a ver dentro de Atton, que ya se ha generado esa nueva carpeta orders.

41
00:03:14,660 --> 00:03:19,680
Ahora vamos a registrar esta app dentro de nuestro proyecto, así que vamos a la carpeta y comercio

42
00:03:19,780 --> 00:03:24,740
y al archivo Crystal y buscamos el atributo Install Apps.

43
00:03:25,760 --> 00:03:31,600
Porque apareció luego de cárcel, luego de la coma le voy a poner acá un enter y le escribo orders,

44
00:03:32,410 --> 00:03:34,690
el nombre de la app y siempre la coma.

45
00:03:34,690 --> 00:03:37,170
Al final vamos a borrar los cambios.

46
00:03:37,200 --> 00:03:43,930
Menú File Safe All y ahora vamos a ubicarnos nuevamente en la carpeta orders ya que aparece el archivo

47
00:03:43,930 --> 00:03:49,120
models donde tengo que crear las clases, las entidades que se convertirán en tablas dentro de un rango.

48
00:03:50,240 --> 00:03:56,180
Recuerda que tenemos que crear una clase order, otra clase Order Product y otra clase payment.

49
00:03:57,200 --> 00:03:59,870
Comencemos por crear la clase Payment.

50
00:03:59,990 --> 00:04:00,800
Vamos a escribir acá.

51
00:04:00,820 --> 00:04:01,400
Class.

52
00:04:02,430 --> 00:04:03,060
Payment.

53
00:04:05,030 --> 00:04:07,790
Proponemos un Model Model.

54
00:04:08,210 --> 00:04:09,350
Dos puntos.

55
00:04:09,650 --> 00:04:17,300
Ya que comenzamos con la primera propiedad que sería user, le voy a poner Model for engine.

56
00:04:22,280 --> 00:04:23,770
Le paso el account.

57
00:04:25,480 --> 00:04:29,020
Te digo que es un delito iguala models.

58
00:04:31,160 --> 00:04:32,810
Punto Cascade.

59
00:04:35,610 --> 00:04:36,570
Porque le pongo esto?

60
00:04:36,570 --> 00:04:44,400
Porque tengo que tener una referencia entre la la tabla de usuarios que account versus la tabla la futura

61
00:04:44,430 --> 00:04:45,300
tabla payment.

62
00:04:46,910 --> 00:04:53,990
Si yo elimino, si yo elimino ese usuario que registró este payment, también se debe eliminar el record

63
00:04:53,990 --> 00:04:54,620
de payment.

64
00:04:54,980 --> 00:05:01,670
Eso es lo que trato de hacer con este atributo Users Models, Forecast Account y el Odd Models Cascade.

65
00:05:03,460 --> 00:05:04,140
Continuemos.

66
00:05:04,150 --> 00:05:09,130
También le voy a crear un payment payment bajo y de igual a Models.

67
00:05:09,160 --> 00:05:11,620
Punto Chart Field.

68
00:05:13,480 --> 00:05:14,250
Y lo ponemos a cabo.

69
00:05:14,260 --> 00:05:17,020
Max Planck máxima longitud de.

70
00:05:19,170 --> 00:05:19,560
Siempre.

71
00:05:21,840 --> 00:05:23,200
Vamos a crear otro muy similar.

72
00:05:23,220 --> 00:05:24,090
Voy a copiarlo.

73
00:05:25,320 --> 00:05:26,060
Aquí lo voy a poner.

74
00:05:26,060 --> 00:05:27,350
Que sea payment method.

75
00:05:28,730 --> 00:05:29,570
Método de pago.

76
00:05:30,880 --> 00:05:31,510
Garfield.

77
00:05:31,540 --> 00:05:32,950
Más lenta la promoción.

78
00:05:33,760 --> 00:05:34,540
Continuemos.

79
00:05:35,590 --> 00:05:38,860
El siguiente es el monto a pagar.

80
00:05:39,190 --> 00:05:40,210
Monto a pagar, Heidy.

81
00:05:44,320 --> 00:05:44,920
A Mount Path.

82
00:05:45,250 --> 00:05:47,230
También va a ser un Max Feeling.

83
00:05:47,230 --> 00:05:48,350
Max 100.

84
00:05:49,710 --> 00:05:50,440
Continuamos.

85
00:05:50,460 --> 00:05:53,520
Creamos otro más que va a ser el estatus.

86
00:05:57,240 --> 00:06:00,330
Y le ponemos que es un char field Max Land en 100.

87
00:06:01,620 --> 00:06:06,390
Y por ultimo vamos a crear la fecha en la cual se está generando ese registro.

88
00:06:06,480 --> 00:06:08,520
Le pongo Create at.

89
00:06:09,060 --> 00:06:09,930
Fecha de creación?

90
00:06:10,380 --> 00:06:11,880
Sería un modo del punto.

91
00:06:13,660 --> 00:06:15,310
Dating field.

92
00:06:16,890 --> 00:06:18,750
Y el valor por defecto que le vamos a dar.

93
00:06:18,750 --> 00:06:20,670
Va a ser un auto nao.

94
00:06:22,010 --> 00:06:23,240
Ad igual a.

95
00:06:24,320 --> 00:06:26,390
Dudo que se auto genere el valor actual.

96
00:06:27,110 --> 00:06:34,790
Listo, también vamos a generar su función de tipo raya para abajo STR para que cuando queramos revisar

97
00:06:34,790 --> 00:06:39,470
esta estructura dentro del saco administrator me muestre un grid con los datos.

98
00:06:40,940 --> 00:06:45,870
Aquí le ponemos su self y lo que quiero que pinte el gris dentro del chango administrator.

99
00:06:45,890 --> 00:06:49,220
Respecto a esta tabla es el valor del PM en AT.

100
00:06:49,310 --> 00:06:52,640
Por eso lo voy a poner Self Punto Payment Heidy.

101
00:06:53,870 --> 00:06:55,040
Lo tenemos listo.

102
00:06:56,240 --> 00:06:56,780
Perfecto.

103
00:06:56,790 --> 00:07:00,980
Ahora vamos a crear la siguiente, que es la clase Order.

104
00:07:01,940 --> 00:07:02,810
La orden de compra.

105
00:07:04,410 --> 00:07:06,900
Le ponemos Mothers Model.

106
00:07:08,020 --> 00:07:08,920
Dos puntos.

107
00:07:10,120 --> 00:07:15,040
De aquí vamos a crear un atributo user igual models for aquí.

108
00:07:16,250 --> 00:07:20,780
Muy similar a la anterior que viene desde Account, la entidad account.

109
00:07:21,230 --> 00:07:23,150
Le digo que también me hicieron delete.

110
00:07:25,150 --> 00:07:26,380
Iguala models.

111
00:07:27,180 --> 00:07:28,930
Punto set null.

112
00:07:33,320 --> 00:07:36,100
Y él no le dijo que iba a ser igual a todo lo que a permitírnoslo.

113
00:07:37,490 --> 00:07:38,300
Lo tenemos.

114
00:07:38,300 --> 00:07:39,860
Y también voy a crear otro.

115
00:07:40,280 --> 00:07:45,620
La relación de Franqui con esta clase que he creado hace un momento que es payment, tiene una relación.

116
00:07:45,620 --> 00:07:46,310
Recuerdas una?

117
00:07:46,310 --> 00:07:46,750
Muchos.

118
00:07:47,390 --> 00:07:50,600
Esa relación se ve representada por una clave foránea.

119
00:07:51,760 --> 00:07:55,180
A este atributo que va a ser una clave foránea, le vamos a poner payment.

120
00:07:56,210 --> 00:07:58,490
Matters puntos por aquí y aquí.

121
00:07:58,490 --> 00:08:03,290
El nombre, la entidad a la cual tiene que hacerse referencia es la clase Point que acabo de crear.

122
00:08:04,490 --> 00:08:06,110
Y también va a ser un modelo.

123
00:08:07,820 --> 00:08:09,470
Va a permitir valores blancos.

124
00:08:11,420 --> 00:08:17,300
Te voy a indicar que si blanco igual a true y null también igual a true.

125
00:08:21,780 --> 00:08:25,800
Vamos a crear otro atributo que va a ser order number número de orden.

126
00:08:27,630 --> 00:08:31,380
En este no vamos a indicar que sean models punto Sarsfield.

127
00:08:34,130 --> 00:08:35,210
Y el Max Land.

128
00:08:35,360 --> 00:08:37,040
Le indicamos que sea de 20.

129
00:08:41,030 --> 00:08:44,510
Creamos otra propiedad que va a ser la de First Name.

130
00:08:45,510 --> 00:08:47,370
El nombre del cliente que está haciendo la compra.

131
00:08:47,380 --> 00:08:48,060
First Name.

132
00:08:49,380 --> 00:08:50,860
Es muy similar Max Land.

133
00:08:50,880 --> 00:08:53,010
En este caso, le voy a pedir que sea 50.

134
00:08:58,940 --> 00:09:01,160
También puede tener un apellido.

135
00:09:02,510 --> 00:09:04,400
Y también va a ser longitud de 50.

136
00:09:05,510 --> 00:09:06,770
Siguiente teléfono.

137
00:09:09,280 --> 00:09:09,730
Fong.

138
00:09:09,910 --> 00:09:11,180
También Sarsfield.

139
00:09:11,440 --> 00:09:12,760
Más de 50.

140
00:09:13,860 --> 00:09:14,580
El email.

141
00:09:19,840 --> 00:09:21,520
Un Garfield en 50.

142
00:09:23,530 --> 00:09:25,600
El Lin Wan.

143
00:09:31,330 --> 00:09:33,070
También le voy a poner que sea en 50.

144
00:09:33,100 --> 00:09:34,360
La voy a poner en este caso, 100.

145
00:09:34,600 --> 00:09:34,960
Mejor.

146
00:09:37,810 --> 00:09:39,310
Y para el nieto.

147
00:09:40,780 --> 00:09:46,630
Se suele colocar dos descripciones respecto de la dirección del cliente para que dé más detalles.

148
00:09:47,110 --> 00:09:51,070
Usualmente se utiliza esta dirección para enviar un paquete.

149
00:09:51,550 --> 00:09:52,510
El producto en sí.

150
00:09:53,720 --> 00:09:56,890
Pero ahora vamos a colocar el state, el estado donde se encuentra.

151
00:09:56,920 --> 00:09:59,110
O también puedes llamarle departamento.

152
00:10:00,540 --> 00:10:04,920
Así que también va a ser muy similar a este Max en Chart Field.

153
00:10:05,840 --> 00:10:06,640
Voy a poner acá.

154
00:10:07,830 --> 00:10:08,400
Estate.

155
00:10:09,750 --> 00:10:11,520
En este caso le pongo 50, nada más.

156
00:10:13,550 --> 00:10:14,750
También le vamos a poner.

157
00:10:16,290 --> 00:10:18,720
Ciudad que sería City 50.

158
00:10:21,390 --> 00:10:23,670
Otro más que puede ser la ciudad.

159
00:10:24,660 --> 00:10:28,650
Yo ya le puse no country país en 50.

160
00:10:30,620 --> 00:10:33,620
Le vamos a agregar también la descripción del producto.

161
00:10:35,860 --> 00:10:38,890
Descripción de la orden Order order not.

162
00:10:40,210 --> 00:10:42,310
Y este le vamos a poner como si fuera un.

163
00:10:44,960 --> 00:10:47,180
Y también que permita que se habla en blanco.

164
00:10:47,330 --> 00:10:48,650
Blank Igual a Trump.

165
00:10:52,270 --> 00:10:56,230
Ahora le ponemos el total order total, el total a pagar.

166
00:10:56,860 --> 00:11:03,790
Le pongo que sea un model punto float field porque es un valor altamente probable que sea decimal.

167
00:11:05,770 --> 00:11:07,510
También el impuesto a pagar tax.

168
00:11:08,170 --> 00:11:12,670
Ponemos un models punto float field.

169
00:11:17,060 --> 00:11:19,220
Y aquí le pongo también el estatus.

170
00:11:19,910 --> 00:11:21,200
El estatus de la orden.

171
00:11:22,160 --> 00:11:23,750
Vamos a colocar aquí Models.

172
00:11:25,010 --> 00:11:25,760
Punto.

173
00:11:26,210 --> 00:11:26,930
Garfield.

174
00:11:28,330 --> 00:11:30,370
Y aquí viene algo muy interesante.

175
00:11:31,330 --> 00:11:35,590
Le voy a colocar primeramente a la longitud del texto que se va a almacenar, más bien le guio que sea

176
00:11:35,590 --> 00:11:36,700
como 50.

177
00:11:38,160 --> 00:11:41,760
Pero voy a indicarle que sea elegible desde un diccionario.

178
00:11:42,270 --> 00:11:44,370
Entonces vamos a la parte superior.

179
00:11:47,240 --> 00:11:47,720
Aquí.

180
00:11:49,350 --> 00:11:54,780
Antes de colocar los atributos dentro de esta clase, aquí a este nivel, y voy a crear un multiple

181
00:11:54,780 --> 00:11:55,290
choice.

182
00:11:56,020 --> 00:11:57,810
Voy a indicarle que se llame Estados.

183
00:12:00,770 --> 00:12:03,770
Y entre paréntesis vamos a crear este diccionario de datos.

184
00:12:07,820 --> 00:12:09,290
Le digo que va a hacer un nido.

185
00:12:10,730 --> 00:12:15,950
El estatus primeramente, no el label que se va a presentar y también.

186
00:12:17,100 --> 00:12:18,180
El Padre New.

187
00:12:19,650 --> 00:12:20,940
Voy a copiar esta línea.

188
00:12:21,450 --> 00:12:22,830
Otro estatus de la orden.

189
00:12:25,580 --> 00:12:26,210
Aceptado.

190
00:12:26,210 --> 00:12:26,860
Acepto.

191
00:12:31,620 --> 00:12:32,700
Voy a poner en español.

192
00:12:33,570 --> 00:12:34,350
Vale, está bien.

193
00:12:35,930 --> 00:12:37,520
Nuevo aceptado.

194
00:12:40,790 --> 00:12:44,930
Otro valor completado en inglés es complete.

195
00:12:47,500 --> 00:12:49,510
En español es completado.

196
00:12:54,370 --> 00:12:55,570
Copiamos a través.

197
00:12:57,930 --> 00:13:01,680
Y finalmente, otro estatus que puede darse en la orden es cancelado.

198
00:13:02,910 --> 00:13:06,090
En inglés es cancelar en español.

199
00:13:06,120 --> 00:13:08,400
Le voy a poner aquí el valor que se va a pintar.

200
00:13:08,400 --> 00:13:09,360
Cancelado.

201
00:13:10,390 --> 00:13:10,840
Listo.

202
00:13:11,720 --> 00:13:12,740
Ahí lo tenemos.

203
00:13:13,400 --> 00:13:14,990
Ahora vamos a la parte inferior.

204
00:13:16,000 --> 00:13:17,870
Dentro de la definición de ese atributo.

205
00:13:17,870 --> 00:13:20,920
Estatus que le he indicado que era longitud máxima de 50.

206
00:13:22,280 --> 00:13:23,860
Indicó que las elección.

207
00:13:23,890 --> 00:13:28,750
La selección viene de este diccionario es Taurus con mayúscula.

208
00:13:30,180 --> 00:13:33,540
Y el valor por default de la orden, si es que no le asignas uno.

209
00:13:34,110 --> 00:13:34,950
Es new.

210
00:13:38,100 --> 00:13:38,430
Listo.

211
00:13:38,430 --> 00:13:39,120
Ya lo tenemos.

212
00:13:39,630 --> 00:13:44,280
Ahora voy a definir otro atributo que es el IP desde el cual se está haciendo la orden.

213
00:13:44,790 --> 00:13:48,000
Hacemos un modo del punto Chart Field.

214
00:13:53,580 --> 00:13:53,810
Y bien?

215
00:13:53,870 --> 00:13:56,150
Digo que Blank puede ser en.

216
00:13:56,570 --> 00:13:57,440
Puede ser blanco.

217
00:13:58,880 --> 00:14:01,670
Y el Max Clement le indico que sea de 20.

218
00:14:04,270 --> 00:14:07,450
También voy a indicarle si ya fue ordenado.

219
00:14:08,490 --> 00:14:11,070
Así que la confirmación de la orden es por derecho.

220
00:14:12,980 --> 00:14:14,480
Igual a modo del punto.

221
00:14:16,040 --> 00:14:17,150
Boolean Fault.

222
00:14:18,440 --> 00:14:20,450
Si es true significa que ya fue ordenado.

223
00:14:20,450 --> 00:14:23,480
Si es false, significa que no fue ordenado.

224
00:14:24,200 --> 00:14:28,160
Entonces aquí por default, por defecto, le voy a indicar que sea false el valor.

225
00:14:30,510 --> 00:14:33,630
También le pongo la fecha en la cual se ha creado ese record.

226
00:14:33,660 --> 00:14:34,380
Create add.

227
00:14:34,920 --> 00:14:35,840
Le pongo models.

228
00:14:35,900 --> 00:14:38,280
Punto datetime field.

229
00:14:40,370 --> 00:14:43,760
Y el valor por defecto atonal at igual a true.

230
00:14:46,020 --> 00:14:50,970
Ahora, como es muy similar, voy a copiar esta línea de apego para la actualización.

231
00:14:50,970 --> 00:14:55,140
Si la orden fue actualizada, entonces aquí le pongo Update Add.

232
00:14:56,170 --> 00:14:58,180
Modelos DateTime Field.

233
00:14:59,380 --> 00:15:00,220
Atonal.

234
00:15:01,350 --> 00:15:03,510
Solo abotonado sin el aut igual a true.

235
00:15:05,870 --> 00:15:09,740
Algo que también estamos notando es que estoy utilizando este modelo account.

236
00:15:10,250 --> 00:15:12,720
Entonces voy a tener que importarlo en la parte superior.

237
00:15:12,740 --> 00:15:22,280
Vamos a la parte de arriba y hacemos un from punto account Punto Models y que importe al account.

238
00:15:26,000 --> 00:15:26,230
Bien.

239
00:15:26,240 --> 00:15:34,790
Ahora vamos a crear la función STR que represente a los records de esta tabla Order dentro del chango

240
00:15:34,790 --> 00:15:36,080
administrator, recuerdas?

241
00:15:36,500 --> 00:15:39,080
Así que vamos aquí a crear un Def.

242
00:15:40,140 --> 00:15:43,650
Con dos rayas para abajo STR y dos rayas para abajo.

243
00:15:44,370 --> 00:15:46,980
Aquí le coloco self y le ponemos dos puntos.

244
00:15:47,960 --> 00:15:51,260
Le indico que retorne self user.

245
00:15:51,260 --> 00:15:51,890
Punto.

246
00:15:52,490 --> 00:15:53,300
First name.

247
00:15:53,870 --> 00:15:57,650
Este es el valor que va a representar a un record de esta tabla order.

248
00:15:59,370 --> 00:16:06,150
A continuación vamos a trabajar en la creación de esta tabla Order Product, que como notarás tiene

249
00:16:06,150 --> 00:16:11,460
cuatro for ok, tiene uno para ordenar, tiene otro para payment, tiene otro producto y tiene otro

250
00:16:11,460 --> 00:16:12,300
para variación.

251
00:16:12,720 --> 00:16:16,830
Vamos nuevamente a mi archivo Models después de la clase Order.

252
00:16:17,990 --> 00:16:19,940
Aquí están mitad inocentes.

253
00:16:20,450 --> 00:16:23,480
Y vamos a crear el Clash Order Product.

254
00:16:25,050 --> 00:16:26,010
Le ponemos acá.

255
00:16:26,010 --> 00:16:29,430
Models Punto Model, dos puntos.

256
00:16:31,080 --> 00:16:34,560
Hacemos un order igual a models for aquí.

257
00:16:38,040 --> 00:16:41,250
Esto va relacionado con orden en la clase orden que acabamos de crear.

258
00:16:41,790 --> 00:16:47,100
Y también va a tener un atributo on delete para que se eliminen en cascada los récords relacionados.

259
00:16:47,310 --> 00:16:49,910
Le pongo Models Cascade.

260
00:16:53,180 --> 00:16:53,510
Listo.

261
00:16:53,510 --> 00:16:55,310
Voy a copiar esta línea.

262
00:16:55,520 --> 00:16:56,270
Aquí la pego.

263
00:16:56,600 --> 00:17:00,170
Y el siguiente es la referencia a la tabla Payment.

264
00:17:01,370 --> 00:17:04,190
Models for Asia Payment.

265
00:17:04,520 --> 00:17:05,870
Aquí es con mayúscula la P.

266
00:17:06,800 --> 00:17:09,740
Y también es un Honda Lead Models Cascade.

267
00:17:10,850 --> 00:17:13,520
Pero en este caso si va a permitir valores nulos.

268
00:17:15,000 --> 00:17:16,470
Brand Truth in.

269
00:17:19,930 --> 00:17:20,340
Listo.

270
00:17:20,950 --> 00:17:21,850
Vamos al siguiente.

271
00:17:21,850 --> 00:17:25,990
También tiene una relación con la entidad, la tabla user.

272
00:17:26,740 --> 00:17:29,850
Así que le ponemos acá fuera, hacia acá.

273
00:17:31,910 --> 00:17:33,710
Iba a ser un montón de modelos.

274
00:17:34,970 --> 00:17:35,390
Listo.

275
00:17:36,380 --> 00:17:43,720
También tiene otra relación con la tabla product que le ponemos product igual a models como Frank.

276
00:17:43,730 --> 00:17:50,270
En vez de order le ponemos con P mayúscula on the Light Mothers Cascade también se cumple.

277
00:17:52,580 --> 00:17:55,250
También vamos a crear otro, para variar.

278
00:17:56,240 --> 00:17:57,070
Frank.

279
00:17:58,420 --> 00:18:00,940
Este va hacia la tabla variación.

280
00:18:02,280 --> 00:18:03,870
Con un ritmo del skate.

281
00:18:04,620 --> 00:18:05,080
Listo.

282
00:18:05,180 --> 00:18:11,880
Entonces estas son las relaciones que va a tener mi orden con diferentes entidades, tablas que ya existen

283
00:18:11,880 --> 00:18:14,040
o van a existir dentro de Chango.

284
00:18:15,480 --> 00:18:16,620
Ahora voy a crear.

285
00:18:17,580 --> 00:18:18,930
Los atributos independientes.

286
00:18:18,930 --> 00:18:23,280
El primero va a ser color models, punto Chart Field.

287
00:18:25,210 --> 00:18:28,360
Pero ponemos que va a tener una longitud máxima de 50.

288
00:18:30,980 --> 00:18:31,790
Voy a copiarlo.

289
00:18:33,850 --> 00:18:36,400
Y también voy a tener otro que va a ser seis.

290
00:18:36,400 --> 00:18:37,160
El tamaño.

291
00:18:37,840 --> 00:18:38,470
Más lenta.

292
00:18:38,620 --> 00:18:39,550
Le pongo en 50.

293
00:18:40,940 --> 00:18:43,850
Y otro más que va a ser el quality la cantidad.

294
00:18:45,010 --> 00:18:47,570
En este caso no ser fiel porque es un número.

295
00:18:47,590 --> 00:18:49,710
Hablamos de cantidades, así que va a ser números enteros.

296
00:18:49,720 --> 00:18:54,370
Por eso le pongo un punto Integer Field.

297
00:18:55,410 --> 00:18:56,460
Sin parámetros.

298
00:18:59,100 --> 00:18:59,850
Está listo.

299
00:19:00,060 --> 00:19:02,010
Ahora le ponemos el Product Prize.

300
00:19:04,950 --> 00:19:07,200
El precio del producto Product Price.

301
00:19:08,720 --> 00:19:15,170
Y esto va a ser un tipo models punto float field, porque es altamente probable que sea decimal.

302
00:19:17,610 --> 00:19:18,720
Y no tiene parámetros.

303
00:19:21,590 --> 00:19:22,520
Continuamos.

304
00:19:23,820 --> 00:19:25,110
Vamos a crear ahora.

305
00:19:26,770 --> 00:19:32,890
Un atributo que va a ser orden, orden et si está siendo ordenado o no, va a ser un tipo de booleano

306
00:19:33,140 --> 00:19:34,480
porque puede ser true o false.

307
00:19:34,540 --> 00:19:41,650
Así que aquí le ponemos boolean field y el valor por defecto que le vamos a dar es un false.

308
00:19:43,780 --> 00:19:45,970
Supongo que Folk Falls.

309
00:19:49,060 --> 00:19:52,240
Vamos a crear una fecha en la cual se creó este registro.

310
00:19:52,540 --> 00:19:54,040
Así que hacemos un Create ad.

311
00:19:55,240 --> 00:19:55,960
Es un motel.

312
00:19:56,110 --> 00:19:56,770
Punto.

313
00:19:57,960 --> 00:20:00,270
Sería That time field.

314
00:20:02,180 --> 00:20:06,020
Y aquí sería un auto neutro que se genera automáticamente hasta fecha.

315
00:20:08,750 --> 00:20:11,420
Abotonado at dentro.

316
00:20:13,710 --> 00:20:16,200
También la fecha en la cual se está actualizando este récord.

317
00:20:16,950 --> 00:20:21,450
Le ponemos acá en vez de crear otra línea, le ponemos update.

318
00:20:22,690 --> 00:20:28,390
Update at y sería atonal sin la AT, al final igual a true.

319
00:20:30,040 --> 00:20:30,430
Tenemos.

320
00:20:30,430 --> 00:20:30,950
Listo.

321
00:20:31,060 --> 00:20:31,370
Bien.

322
00:20:31,630 --> 00:20:34,210
Vamos a crear la función def STR.

323
00:20:34,240 --> 00:20:35,230
Ya sabes para que sirve.

324
00:20:36,060 --> 00:20:42,820
Es la cabecera del grid para los elementos que contenga esta tabla de visualización en juego.

325
00:20:42,820 --> 00:20:43,480
Administration.

326
00:20:45,110 --> 00:20:46,280
Le ponemos self.

327
00:20:49,460 --> 00:20:54,220
El valor que quiero que pinte en el grid es el nombre del producto, así que le voy a retornar un self

328
00:20:54,580 --> 00:20:58,150
punto product punto product name.

329
00:21:01,560 --> 00:21:05,710
Aquí estoy utilizando lo que es el producto y también el variación.

330
00:21:05,820 --> 00:21:07,920
Tengo que importar estas entidades.

331
00:21:07,920 --> 00:21:09,540
Así que vamos a la parte superior.

332
00:21:10,980 --> 00:21:15,020
Desde aquí voy a escribir From Story Punto Models.

333
00:21:15,560 --> 00:21:20,000
Importa que importe a product y también importe a variación.

334
00:21:20,660 --> 00:21:27,290
Como último paso, ya sabes que tenemos que registrar estas entidades Payment Order y Order producto

335
00:21:27,590 --> 00:21:30,800
dentro del archivo admin punto PI.

336
00:21:31,190 --> 00:21:34,700
Vamos entonces a la carpeta orders y aquí aparece el pi y.

337
00:21:36,050 --> 00:21:38,600
Vamos a registrarlos, pero primero tenemos que importarlos.

338
00:21:38,600 --> 00:21:42,350
Así que hacemos un from models import.

339
00:21:43,470 --> 00:21:44,070
Payment.

340
00:21:44,550 --> 00:21:45,100
Coma.

341
00:21:45,120 --> 00:21:45,840
Order.

342
00:21:46,320 --> 00:21:46,970
Coma.

343
00:21:46,980 --> 00:21:47,400
Order.

344
00:21:47,400 --> 00:21:47,910
Product.

345
00:21:49,790 --> 00:21:51,240
Lo tenemos listo ya.

346
00:21:51,260 --> 00:21:57,230
Ahora sí vamos a agregarlos al site de admin site register.

347
00:21:59,000 --> 00:22:01,010
Aquí le pongo la entidad Payment.

348
00:22:01,430 --> 00:22:02,570
Voy a copiar esta línea.

349
00:22:03,520 --> 00:22:05,050
Pero acá y pegó la otra.

350
00:22:06,090 --> 00:22:11,160
P que le dio que también importe a order ya el otro que es el order product.

351
00:22:17,040 --> 00:22:17,730
Está correcto.

352
00:22:17,740 --> 00:22:20,520
Vamos a verificar en nuestro archivo Models Punto Pi y.

353
00:22:21,540 --> 00:22:24,060
Si está correcto el registro de las entidades.

354
00:22:25,420 --> 00:22:26,440
Lo tenemos listo.

355
00:22:26,440 --> 00:22:27,000
Ahora sí.

356
00:22:27,010 --> 00:22:33,760
Vamos a ir a Menú File Safe All y vamos a abrir nuestra consola y vamos a escribir el comando para poder

357
00:22:33,760 --> 00:22:35,580
crear los archivos de migración.

358
00:22:35,590 --> 00:22:43,780
Hacemos un Python Espacio Manager Punto P y Espacio Make Migration y le damos Enter.

359
00:22:45,280 --> 00:22:45,790
Perfecto.

360
00:22:45,790 --> 00:22:47,230
Se ha creado el archivo de migración.

361
00:22:48,130 --> 00:22:50,500
A continuación, vamos a ejecutarlo.

362
00:22:50,800 --> 00:22:58,720
Entonces hacemos otro comando Python Espacio Management Py, espacio Malgrat y le damos Enter.

363
00:23:00,300 --> 00:23:00,990
Perfecto.

364
00:23:01,000 --> 00:23:02,940
Se ha ejecutado sin ningún problema.

365
00:23:03,420 --> 00:23:05,160
Vamos a levantar nuestro servidor en Yanko.

366
00:23:05,160 --> 00:23:09,900
Por eso escribimos el Paito, Espacio Manage y Espacio Ram Server.

367
00:23:10,530 --> 00:23:16,530
Le damos a Enter y vamos a ir a Jango Administration para verificar que las entidades se crearon correctamente.

368
00:23:16,770 --> 00:23:24,060
Estamos en el local Admin y como puedes ver, dentro de este bloque aparece ya la aplicación de Orders

369
00:23:24,060 --> 00:23:27,780
y dentro las entidades de Order Products Orders y Payment.

370
00:23:27,990 --> 00:23:30,090
Continuamos en el siguiente capítulo.
