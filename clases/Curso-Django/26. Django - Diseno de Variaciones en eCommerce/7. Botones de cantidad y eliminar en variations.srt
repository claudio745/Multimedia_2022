1
00:00:00,450 --> 00:00:06,090
En este capítulo vamos a trabajar en la implementación de la lógica para estos botones de incremento

2
00:00:06,090 --> 00:00:10,620
y decremento de la cantidad de una línea del CAR del carrito de compras.

3
00:00:11,250 --> 00:00:16,140
También trabajaremos en la implementación de la lógica para este botón de eliminar.

4
00:00:17,470 --> 00:00:18,520
Estamos en Atom.

5
00:00:18,970 --> 00:00:20,710
Vamos a ir ahora a Templates.

6
00:00:21,130 --> 00:00:25,420
Dentro de Templates Store y dentro de Story está el CAR html.

7
00:00:26,540 --> 00:00:29,030
Ahora vamos hacia la línea 58.

8
00:00:29,030 --> 00:00:30,620
Alrededor de la línea 58.

9
00:00:30,650 --> 00:00:33,470
Puede ser diferente dependiendo cómo tu has copiado y pegado tu código.

10
00:00:33,890 --> 00:00:38,540
Y aquí van a aparecer los botones de incremento y decremento.

11
00:00:39,320 --> 00:00:47,900
Vas a reconocerlo porque aparece este href con el o rlr move card y también otro para guardar el azúcar.

12
00:00:48,590 --> 00:00:50,540
Voy a maximizar mi pantalla.

13
00:00:50,870 --> 00:00:51,830
Ahí lo puedes ver.

14
00:00:53,190 --> 00:00:55,590
Lo que está sucediendo aquí es que este año, Rev.

15
00:00:55,890 --> 00:00:59,190
Está enviando mi método como un tipo get.

16
00:00:59,970 --> 00:01:06,510
Pero ahora, si bien recuerdas, nosotros estamos trabajando en la actualización del carrito de compras

17
00:01:06,510 --> 00:01:11,430
para agregar nuevos elementos a su carrito de compras o actualizarlos utilizando el método Pos.

18
00:01:11,940 --> 00:01:15,630
Por este motivo, vamos a hacer lo siguiente dentro de este div.

19
00:01:16,740 --> 00:01:18,870
Aquel que contiene este href a.

20
00:01:19,590 --> 00:01:20,730
Voy a darle un tag primero.

21
00:01:21,000 --> 00:01:22,190
Voy a ponerle un enter.

22
00:01:22,200 --> 00:01:23,430
Separarlo para que lo notes.

23
00:01:25,140 --> 00:01:25,530
Aquí.

24
00:01:25,530 --> 00:01:28,410
Dentro de este disco vamos a agregar un elemento tipo form.

25
00:01:29,790 --> 00:01:30,640
Escribimos Fon.

26
00:01:31,710 --> 00:01:32,430
Ahí apareció.

27
00:01:34,060 --> 00:01:35,830
Este tag de close form.

28
00:01:36,460 --> 00:01:37,810
Voy a cortarlo.

29
00:01:40,690 --> 00:01:44,680
Y lo pongo después del href y antes.

30
00:01:44,830 --> 00:01:46,030
Y antes del cierre del div.

31
00:01:46,510 --> 00:01:46,930
Listo?

32
00:01:47,410 --> 00:01:48,010
Lo tengo.

33
00:01:48,220 --> 00:01:54,940
Ahora, lo que voy a hacer a continuación es copiar cortar este href que tiene el valor del href.

34
00:01:56,720 --> 00:01:57,740
Lo cortamos.

35
00:01:59,010 --> 00:02:01,650
Y lo colocamos aquí en la sección del avión.

36
00:02:02,010 --> 00:02:05,790
Voy a eliminar primero lo que tiene por defecto y aquí pego lo del avión.

37
00:02:06,600 --> 00:02:08,440
Este class no lo necesito del form.

38
00:02:08,490 --> 00:02:09,540
Ese atributo lo borro.

39
00:02:10,260 --> 00:02:12,030
Y el método es de tipo post.

40
00:02:12,060 --> 00:02:12,990
Eso está correcto.

41
00:02:13,800 --> 00:02:19,590
Y para que veas que exitosamente los parámetros de este form vamos a colocar aquí entre Chávez.

42
00:02:20,750 --> 00:02:24,320
Y si no de porcentajes, el CS CRF.

43
00:02:25,560 --> 00:02:26,090
Toquen.

44
00:02:28,470 --> 00:02:28,980
También.

45
00:02:28,980 --> 00:02:35,820
Ahora ya no va a ser un href, va a ser un botón para abrir y también la parte final para cerrar button

46
00:02:35,820 --> 00:02:40,380
sea button y este atributo href ya no lo necesito, también lo eliminamos.

47
00:02:42,000 --> 00:02:49,410
Y como quiero que este botón se dispare cuando lee click y a su vez llame al Action for Action, tengo

48
00:02:49,410 --> 00:02:54,360
que indicarle aquí que ese type ya no va a ser button, sino tiene que ser de tipo submit.

49
00:02:54,840 --> 00:03:02,040
También voy a necesitar en la enviar las variaciones que contiene esta línea del carrito, por lo que

50
00:03:02,040 --> 00:03:03,990
aquí voy a crear un bucle.

51
00:03:05,740 --> 00:03:11,980
Para pintar esas variaciones y enviarlas hacemos un for item.

52
00:03:13,320 --> 00:03:19,650
En car items y en item punto variaciones all.

53
00:03:21,180 --> 00:03:22,200
Ya que lo cerramos.

54
00:03:25,350 --> 00:03:32,820
Tenemos un foro listo ya que creamos un campo oculto que no se va a visualizar en la pantalla pero que

55
00:03:32,820 --> 00:03:37,440
va a estar presente para poder enviar estos datos al servidor.

56
00:03:38,070 --> 00:03:39,510
Entonces hacemos un input.

57
00:03:41,090 --> 00:03:41,760
Aquí está.

58
00:03:41,780 --> 00:03:43,010
Es un tipo.

59
00:03:44,000 --> 00:03:45,710
Jayden oculto doble de.

60
00:03:47,600 --> 00:03:50,930
Y aquí en la sección del nombre le vamos a poner doble Chávez.

61
00:03:52,180 --> 00:03:52,660
Que sea.

62
00:03:52,660 --> 00:03:53,130
Item.

63
00:03:53,140 --> 00:03:53,770
Punto.

64
00:03:53,770 --> 00:03:54,610
Variación.

65
00:03:55,540 --> 00:03:56,200
Category.

66
00:03:57,150 --> 00:04:00,120
Y para el vale le ponemos entre doble Chávez.

67
00:04:03,960 --> 00:04:04,470
Item.

68
00:04:04,470 --> 00:04:05,610
Punto, variación.

69
00:04:08,530 --> 00:04:09,340
Pero allá abajo.

70
00:04:09,340 --> 00:04:09,790
Vale?

71
00:04:11,120 --> 00:04:17,570
También quiero que el primer caracter sea de mayúscula para el value, así que aquí le ponemos el operador

72
00:04:18,110 --> 00:04:18,710
de barra.

73
00:04:19,820 --> 00:04:20,420
Que le pongo el.

74
00:04:24,230 --> 00:04:24,650
Listo.

75
00:04:25,510 --> 00:04:29,230
Y para lo que es el category y the name category.

76
00:04:30,900 --> 00:04:33,750
Aquí le vamos a poner una barra porque quiero que sea todo en minúscula.

77
00:04:33,750 --> 00:04:35,110
Entonces le pongo lower.

78
00:04:36,780 --> 00:04:37,500
Perfecto.

79
00:04:37,500 --> 00:04:38,430
Ya lo tengo.

80
00:04:39,710 --> 00:04:41,690
Vamos a borrar todos los cambios.

81
00:04:41,840 --> 00:04:46,100
Menú File Save All y vamos a la página a probar.

82
00:04:47,260 --> 00:04:48,190
Estamos en la página.

83
00:04:48,220 --> 00:04:50,290
Voy a refrescar el carrito de compras.

84
00:04:50,620 --> 00:04:51,820
Parece camisa moderna.

85
00:04:51,890 --> 00:04:52,600
Rojo Large.

86
00:04:53,230 --> 00:04:55,450
Vamos a darle al botón de suma.

87
00:04:56,450 --> 00:04:58,520
Y mira, ya se está agregando.

88
00:04:59,520 --> 00:05:02,670
Está actualizando la cantidad exitosamente.

89
00:05:04,610 --> 00:05:09,650
Ahora vamos a trabajar en este botón para eliminar la cantidad o hacer que la cantidad de crezca.

90
00:05:10,100 --> 00:05:11,780
Vamos entonces a la página nuevamente.

91
00:05:12,560 --> 00:05:13,880
Esto es dentro de la página.

92
00:05:14,240 --> 00:05:20,900
Aquí en la parte superior, aparece el botón para el remove cart y yo voy a seguir utilizando para este

93
00:05:20,900 --> 00:05:24,440
caso el método que no necesito pasarle por un post.

94
00:05:24,920 --> 00:05:28,250
Es decir, no necesito agregar un formulario para este, para este botón.

95
00:05:28,550 --> 00:05:34,730
Lo que sí necesito agregarle es que este remove car por el momento está pasándole solo un parámetro

96
00:05:35,030 --> 00:05:36,160
el Product Heidy.

97
00:05:36,800 --> 00:05:41,480
Pero también necesito pasarle otro parámetro que es el car y then Heidy.

98
00:05:41,840 --> 00:05:44,740
Entonces aquí le pongo un espacio y le voy a poner car.

99
00:05:44,750 --> 00:05:46,820
Item punto.

100
00:05:47,210 --> 00:05:47,630
Heidy.

101
00:05:49,920 --> 00:05:56,100
Pero si le hemos cambiado el número de parámetros a esta función, remove car significa que también

102
00:05:56,100 --> 00:06:00,600
tenemos que cambiar la función para que acepte este nuevo parámetro card y tenga IDE.

103
00:06:00,870 --> 00:06:04,050
Vamos a abrir explorador de archivos de nuestro proyecto.

104
00:06:04,710 --> 00:06:09,720
Y ahora vamos hacia la carpeta Quartz y el archivo Buscar py y.

105
00:06:10,760 --> 00:06:13,970
Y aquí voy a buscar la función Remove card.

106
00:06:14,240 --> 00:06:17,240
Vamos a ver a qué aparece el remove card.

107
00:06:17,690 --> 00:06:18,350
Ya lo viste?

108
00:06:18,530 --> 00:06:20,900
Por el momento solo tenía el ID.

109
00:06:21,320 --> 00:06:22,310
Voy a cambiar esto.

110
00:06:22,820 --> 00:06:25,910
Le pongo una coma y también le digo que pase el parámetro card.

111
00:06:26,270 --> 00:06:27,590
Item id.

112
00:06:29,810 --> 00:06:30,470
Está listo.

113
00:06:30,770 --> 00:06:32,690
Vamos a ver dónde lo vamos a modificar.

114
00:06:33,200 --> 00:06:36,200
Vamos a la sección del CAR ítem.

115
00:06:36,950 --> 00:06:37,770
Aquí lo puedes ver.

116
00:06:37,790 --> 00:06:38,630
Este ítem.

117
00:06:39,860 --> 00:06:46,670
Estoy haciendo la consulta a la estructura, a la tabla CAR y Object Get, haciendo un product para

118
00:06:46,670 --> 00:06:48,860
que busque por el producto, por el cart.

119
00:06:49,460 --> 00:06:54,470
Y también voy a indicarle que agregue para que lo busque por el ID.

120
00:06:55,620 --> 00:06:57,900
Del car, que sería car ítem.

121
00:06:59,480 --> 00:07:01,220
Y el parámetro que acabo de agregar.

122
00:07:02,940 --> 00:07:05,580
Pero aquí voy a trabajar con un try catch.

123
00:07:06,060 --> 00:07:06,840
Le pongo un try.

124
00:07:08,710 --> 00:07:13,210
Y aquí voy a tomar todos estos valores antes del Return Ready.

125
00:07:13,390 --> 00:07:13,870
Retire.

126
00:07:15,150 --> 00:07:18,150
Y voy a poner un top para que esté dentro de la sección del Tri.

127
00:07:19,170 --> 00:07:21,180
De momento, voy a quitarle tu espacio en blanco.

128
00:07:21,180 --> 00:07:21,600
Listo.

129
00:07:23,740 --> 00:07:27,010
De aquí le estoy indicando que me busque el item.

130
00:07:28,150 --> 00:07:30,850
Agregándole el Kryten y de.

131
00:07:31,800 --> 00:07:38,850
Si esto es correcto, entonces recién hago la evaluación para actualizar la cantidad.

132
00:07:39,890 --> 00:07:45,000
Para actualizar la cantidad en uno, si es que la cantidad es mayor que uno.

133
00:07:45,020 --> 00:07:48,260
En caso contrario, que elimine este ítem.

134
00:07:50,520 --> 00:07:54,990
Luego de esto voy a poner un enter acá y le pongo un SP.

135
00:07:56,070 --> 00:07:56,820
Dos puntos.

136
00:07:57,420 --> 00:07:58,020
Que no haga nada.

137
00:07:58,020 --> 00:08:01,170
Solamente que le de un pase y finalmente haga un return.

138
00:08:01,530 --> 00:08:02,520
Redireccionar.

139
00:08:02,700 --> 00:08:04,170
Ten mucho cuidado con los taps.

140
00:08:04,200 --> 00:08:10,260
Recuerda que en Python en la sintaxis de Python y Django es muy importante tener los tabs.

141
00:08:10,290 --> 00:08:12,480
De lo contrario te puede dar problemas.

142
00:08:13,530 --> 00:08:15,740
Ya hemos actualizado entonces este método.

143
00:08:15,750 --> 00:08:21,420
Ahora nos falta también actualizar el path que representa a esta función de tipo dev.

144
00:08:21,840 --> 00:08:26,370
Vayamos para esto al archivo PIC que está en la carpeta Quartz.

145
00:08:26,790 --> 00:08:27,660
Lo vamos a abrir.

146
00:08:29,170 --> 00:08:32,650
Y aquí aparece el path que representa la función remove cart.

147
00:08:33,250 --> 00:08:37,750
Aquí puedes notar que tiene un ritmo con un solo parámetro por ahora que es el período leidy.

148
00:08:38,980 --> 00:08:45,790
Lo que voy a hacer es que luego de leer las que continúa vamos a agregar otro parámetro de tipo int

149
00:08:46,480 --> 00:08:50,170
y le pongo car item re trabajo Heidy.

150
00:08:52,120 --> 00:08:54,430
Se cierra y al final un slash.

151
00:08:56,710 --> 00:08:57,670
Ahí lo tenemos.

152
00:08:58,000 --> 00:08:58,870
Eso sería todo.

153
00:08:58,870 --> 00:09:01,510
Revisa bien que tu código esté correcto.

154
00:09:02,680 --> 00:09:05,260
Íbamos a borrar los cambios de Newfield Safe Hall.

155
00:09:06,650 --> 00:09:08,720
Estamos en la página del carrito de compras.

156
00:09:08,750 --> 00:09:09,710
Voy a actualizarla.

157
00:09:09,800 --> 00:09:10,670
Perfecto.

158
00:09:11,180 --> 00:09:13,190
Vamos a darle click ahora al botón de menos.

159
00:09:13,760 --> 00:09:15,650
Y efectivamente, ya está funcionando.

160
00:09:15,720 --> 00:09:18,260
Mira, está retrocediendo a uno.

161
00:09:18,590 --> 00:09:19,880
A ver si le quito una vez más.

162
00:09:19,880 --> 00:09:20,900
Se tiene que eliminar.

163
00:09:21,590 --> 00:09:23,150
Y también se eliminó.

164
00:09:23,180 --> 00:09:29,990
Entonces ya están funcionando los botones para incrementar y hacer el decremento de las cantidades de

165
00:09:29,990 --> 00:09:31,460
las líneas de los productos.

166
00:09:32,700 --> 00:09:36,210
Ahora, finalmente vamos a trabajar en este botón de eliminar.

167
00:09:37,690 --> 00:09:44,530
Estamos en Atton, vamos a ir a Templates, vamos nuevamente al CAR Punto, a HTML y más o menos, y

168
00:09:44,530 --> 00:09:47,470
la línea 70 75.

169
00:09:48,340 --> 00:09:52,780
Aquí debe aparecer un botón que dice Remove o eliminar.

170
00:09:53,050 --> 00:09:54,610
Aquí aparece la línea 83.

171
00:09:54,610 --> 00:09:55,330
Está en mi caso.

172
00:09:57,210 --> 00:09:57,520
Pare.

173
00:09:57,630 --> 00:10:00,310
Para este botón estoy utilizando un href.

174
00:10:00,540 --> 00:10:01,380
Eso está correcto.

175
00:10:02,160 --> 00:10:08,190
Y la función es un remove car item pasándole ese parámetro product id.

176
00:10:09,410 --> 00:10:15,170
Bien, aquí le tengo que pasar también este otro parámetro que es el car item.

177
00:10:16,880 --> 00:10:17,650
Punto.

178
00:10:17,680 --> 00:10:18,100
Heidi.

179
00:10:20,560 --> 00:10:23,140
Y ahora vayamos hacia el archivo.

180
00:10:23,200 --> 00:10:25,600
Vamos a ir a la carpeta Quartz y al archivo.

181
00:10:25,610 --> 00:10:32,410
Yo haré el punto P y y aquí en el path vamos a también cambiarle para esa función remove car item que

182
00:10:32,410 --> 00:10:33,550
acabo de actualizar.

183
00:10:34,480 --> 00:10:36,880
Muy similar a lo que hicimos hace un momento con el Remove Car.

184
00:10:37,420 --> 00:10:40,790
Le había agregado este item car y.

185
00:10:41,350 --> 00:10:42,880
Bueno, esto lo voy a copiar.

186
00:10:43,960 --> 00:10:45,970
De aquí el paso final.

187
00:10:46,000 --> 00:10:47,560
Luego del slash lo pego.

188
00:10:48,690 --> 00:10:51,960
Quedaría entonces como un item car y ten idi.

189
00:10:55,530 --> 00:10:59,640
Ahora vamos al archivo que está en la carpeta CAR que se llama Punto P y.

190
00:11:00,790 --> 00:11:04,480
Y aquí vamos a buscar la función remove car item.

191
00:11:05,880 --> 00:11:13,610
Y le voy a agregar como un parámetro de la función al cart repro abajo y then raya para abajo.

192
00:11:13,620 --> 00:11:14,040
Heidy.

193
00:11:16,780 --> 00:11:23,050
Y ahora vamos a ubicarnos en este query para buscar el item desde el atributo car y desde la entidad

194
00:11:23,290 --> 00:11:23,650
item.

195
00:11:24,310 --> 00:11:32,320
Y aquí dentro del filtro voy a agregarle un car y luego del car coma de poner un id igual al parámetro

196
00:11:32,320 --> 00:11:35,290
que ingrese car raya para abajo, item raya para abajo.

197
00:11:35,290 --> 00:11:37,510
Ahí lo tenemos listo.

198
00:11:37,510 --> 00:11:38,380
Vamos a borrar los cambios.

199
00:11:38,380 --> 00:11:40,810
Menu Fail safe all y vamos a la página.

200
00:11:41,710 --> 00:11:44,400
Estamos en la página del carrito de compras.

201
00:11:44,410 --> 00:11:50,440
Voy a actualizar y ahora le explico el botón Eliminar y perfecto, ya se eliminó también.
