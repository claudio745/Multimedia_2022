1
00:00:00,330 --> 00:00:03,500
En este capítulo vamos a trabajar en el tag de cambiar el password.

2
00:00:03,510 --> 00:00:10,110
Para esto, ya sabes, tenemos que crear un path y también tenemos que crear una función web y un formulario

3
00:00:10,110 --> 00:00:11,520
template html.

4
00:00:12,360 --> 00:00:16,990
Vamos primero hacia la carpeta account y nos ubicamos en el archivo el punto P.

5
00:00:17,010 --> 00:00:20,760
Y aquí voy a copiar esta línea de Edit Profile.

6
00:00:21,270 --> 00:00:21,990
Aquí la pego.

7
00:00:23,650 --> 00:00:32,170
Y le vamos a poner de nombre a este Path Change password cambiar de password y el nombre de la función.

8
00:00:33,710 --> 00:00:35,930
También se va a llamar igual Jaime Password.

9
00:00:36,840 --> 00:00:40,770
Vamos ahora al archivo buscar pi de la carpeta account.

10
00:00:41,920 --> 00:00:43,600
Y nos ubicamos en la parte final.

11
00:00:45,600 --> 00:00:46,670
Vamos en la parte final.

12
00:00:46,820 --> 00:00:48,050
Un espaciado más.

13
00:00:48,050 --> 00:00:50,060
Y aquí le voy a crear un DEF.

14
00:00:50,980 --> 00:00:51,970
Anoche en password.

15
00:00:54,160 --> 00:00:55,210
Que reciba un objeto.

16
00:00:55,870 --> 00:01:00,790
Pero esta función sólo va a trabajar cuando el usuario esté logueado.

17
00:01:00,820 --> 00:01:06,430
Si no está logueado, no va a trabajar para ponerle esto un login required.

18
00:01:09,520 --> 00:01:10,660
Y me digo que lo que.

19
00:01:12,050 --> 00:01:15,020
Su tarea va a ser igual a lo que es.

20
00:01:15,300 --> 00:01:17,150
Y ahora vamos a la lógica del método.

21
00:01:17,540 --> 00:01:23,690
Lo primero es que yo voy a esperar los datos de un formulario que se envían en un método tipo post para

22
00:01:23,690 --> 00:01:26,120
poder capturar los valores del password.

23
00:01:26,690 --> 00:01:29,930
Así que hago primero una condición y request method.

24
00:01:31,340 --> 00:01:32,390
Es igual a pos.

25
00:01:34,190 --> 00:01:34,930
Dos puntos.

26
00:01:34,940 --> 00:01:36,230
Entonces que suceda esto.

27
00:01:37,130 --> 00:01:42,680
Que capture el valor parámetro que me esté enviando el usuario en esta variable que voy a llamar Current

28
00:01:42,680 --> 00:01:43,160
Password.

29
00:01:44,490 --> 00:01:46,560
Te pongo request post.

30
00:01:49,470 --> 00:01:53,460
Que vamos a llamarle, que el parámetro es un buen paso lo que me está enviando el cliente.

31
00:01:55,950 --> 00:01:58,290
Y también me tiene que enviar el nuevo password.

32
00:02:01,430 --> 00:02:03,140
Y también va por un rico esposo.

33
00:02:05,300 --> 00:02:06,350
No password.

34
00:02:09,720 --> 00:02:10,050
Esto.

35
00:02:11,890 --> 00:02:14,650
También tengo que confirmar que el password sea el mismo.

36
00:02:15,130 --> 00:02:16,220
Me refiero al nuevo password.

37
00:02:16,240 --> 00:02:17,680
Los dos tienen que ser lo mismo.

38
00:02:18,190 --> 00:02:19,390
Es una medida de seguridad.

39
00:02:21,200 --> 00:02:23,390
Request pun, punto post.

40
00:02:25,700 --> 00:02:28,580
Aquí le colocamos confirm password.

41
00:02:34,540 --> 00:02:38,780
Y aquí vamos a buscar al usuario sobre el cual quiero hacer esta evaluación.

42
00:02:39,070 --> 00:02:42,670
Por eso llamo a la Entidad Account Objects Get.

43
00:02:44,890 --> 00:02:48,640
Y lo voy a usar utilizando el user.

44
00:02:49,580 --> 00:02:49,970
Name.

45
00:02:50,450 --> 00:02:51,060
Exacto.

46
00:02:51,560 --> 00:02:52,430
Este es el operador.

47
00:02:53,400 --> 00:02:54,000
Contra quién?

48
00:02:54,030 --> 00:02:56,460
Contra request, punto y username.

49
00:02:59,400 --> 00:03:00,300
Lo tenemos listo.

50
00:03:01,620 --> 00:03:02,790
Y ahora voy a hacer la condición.

51
00:03:03,000 --> 00:03:09,630
Si no, si el nuevo password es igual que el password que estás confirmando con el password, entonces

52
00:03:10,080 --> 00:03:13,410
voy a indicarle que haga primero un chequeo del password.

53
00:03:15,890 --> 00:03:20,750
Que cumple con las reglas de Chango para saber si el password es válido o no.

54
00:03:21,110 --> 00:03:23,030
Por eso le pongo el punto checkout.

55
00:03:24,110 --> 00:03:24,560
Check.

56
00:03:25,840 --> 00:03:27,550
Entonces raya abajo password.

57
00:03:31,440 --> 00:03:33,180
Y aquí le paso ese buen pastor.

58
00:03:36,280 --> 00:03:41,320
Si es success, si es exitoso el resultado, entonces quiero que.

59
00:03:42,910 --> 00:03:45,860
Ese es el nuevo password de usuario.

60
00:03:46,520 --> 00:03:47,870
Le pongo acá mi password?

61
00:03:50,200 --> 00:03:51,940
Y se actualice en la base de datos.

62
00:03:52,060 --> 00:03:52,590
Giuseppe.

63
00:03:55,550 --> 00:04:01,100
También quiero enviar un mensaje indicando que indicándole al usuario que su password fue actualizado

64
00:04:01,100 --> 00:04:01,820
exitosamente.

65
00:04:02,480 --> 00:04:06,440
Entonces aquí llama un messages punto success.

66
00:04:09,010 --> 00:04:09,750
Somos los católicos.

67
00:04:09,770 --> 00:04:10,000
Es.

68
00:04:11,970 --> 00:04:13,470
Y el mensaje sería.

69
00:04:16,190 --> 00:04:16,550
A ver.

70
00:04:18,120 --> 00:04:18,900
El password.

71
00:04:20,470 --> 00:04:21,400
Se actualizó.

72
00:04:23,170 --> 00:04:24,160
Exitosamente.

73
00:04:26,570 --> 00:04:29,070
Lo tengo y luego le hago un return directo.

74
00:04:31,120 --> 00:04:36,670
Hacia el change password, que es el template que va a recibir ese mensaje.

75
00:04:36,970 --> 00:04:42,310
Bien, lo tenemos ahí, pero si no es exitoso el cambio, entonces.

76
00:04:43,570 --> 00:04:47,770
Vamos a poner un siempre recuerda, siempre lo repito porque es muy importante los tabs.

77
00:04:49,060 --> 00:04:51,280
Tienen que estar al mismo nivel de un y de un LP.

78
00:04:51,580 --> 00:04:53,260
De lo contrario te va a dar errores.

79
00:04:54,160 --> 00:04:57,340
Si no es exitoso, entonces voy a mandar un mensaje de error.

80
00:04:57,370 --> 00:04:59,530
Le voy a decir mensajes de error.

81
00:05:01,610 --> 00:05:02,330
Rico es.

82
00:05:04,180 --> 00:05:09,610
Y le indico acá por favor ingrese un password valido.

83
00:05:12,230 --> 00:05:13,490
Y algún retour le diré.

84
00:05:15,980 --> 00:05:17,750
Hacia el Change Bradford.

85
00:05:20,200 --> 00:05:20,590
Listo.

86
00:05:21,690 --> 00:05:26,910
Ahora vamos para esta condición del IF para si el nuevo password es igual a su confirmación.

87
00:05:28,130 --> 00:05:29,330
Todo eso va a suceder aquí.

88
00:05:29,510 --> 00:05:33,500
Pero si no es igual, entonces tengo que colocar un enlace a toda esta lógica.

89
00:05:34,100 --> 00:05:37,940
Entonces le doy un enter y aquí le agrego un else dos puntos.

90
00:05:37,940 --> 00:05:41,360
Pero a este nivel, al nivel del if de la parte superior.

91
00:05:43,150 --> 00:05:43,480
A ver.

92
00:05:43,480 --> 00:05:47,830
Y aquí le vamos a escribir un mensaje también de error messages.

93
00:05:48,370 --> 00:05:48,910
Error?

94
00:05:51,590 --> 00:05:52,220
Rico es.

95
00:05:55,130 --> 00:05:58,310
El password no coincide con la confirmación.

96
00:06:00,580 --> 00:06:01,960
Con la confirmación de password.

97
00:06:03,880 --> 00:06:04,360
Listo.

98
00:06:05,770 --> 00:06:07,000
Y hago un return.

99
00:06:08,190 --> 00:06:08,790
Pediré.

100
00:06:11,740 --> 00:06:13,330
Hacia el Temple Change.

101
00:06:13,330 --> 00:06:13,860
Password.

102
00:06:14,260 --> 00:06:14,620
Listo.

103
00:06:17,520 --> 00:06:20,880
Y por último, le vamos a colocar un momento.

104
00:06:22,830 --> 00:06:24,300
Aquí a este nivel de ELS.

105
00:06:25,380 --> 00:06:27,220
Como antes de leerse un tag.

106
00:06:27,240 --> 00:06:30,810
Antes de leerse le vamos a colocar aquí un return render.

107
00:06:34,980 --> 00:06:36,900
Que me lleve al request.

108
00:06:37,530 --> 00:06:40,560
Coma account es elas.

109
00:06:41,400 --> 00:06:41,970
Change.

110
00:06:42,270 --> 00:06:42,990
Password.

111
00:06:43,470 --> 00:06:44,370
HTML.

112
00:06:45,570 --> 00:06:46,020
Ten cuidado.

113
00:06:46,410 --> 00:06:51,690
Esto va a suceder si es que no le estamos mandando datos en el método Post.

114
00:06:53,110 --> 00:06:56,290
Si le mandas métodos en el método Post, va a suceder todo esto.

115
00:06:57,290 --> 00:07:03,350
Pero si no le estás mandando métodos, el método post por defecto te va a pintar el template change

116
00:07:03,440 --> 00:07:04,010
password.

117
00:07:05,300 --> 00:07:07,400
Vamos ahora a revisar el anterior método.

118
00:07:07,400 --> 00:07:14,030
Creo que en el anterior método Edit Profile para editar un perfil también necesita esa validación del

119
00:07:14,030 --> 00:07:14,930
login required.

120
00:07:15,380 --> 00:07:19,790
Voy a copiar este lo que es un required y se le agregó a este edit profile.

121
00:07:21,560 --> 00:07:22,160
Perfecto.

122
00:07:23,450 --> 00:07:25,340
Vamos ahora a crear.

123
00:07:26,610 --> 00:07:28,710
Este template password.

124
00:07:30,380 --> 00:07:32,390
Vamos a la sección de Account.

125
00:07:33,960 --> 00:07:35,190
Templates Account.

126
00:07:35,650 --> 00:07:37,020
Y aquí vamos a darle clic derecho.

127
00:07:38,540 --> 00:07:39,200
Newfield.

128
00:07:40,450 --> 00:07:41,830
Y creamos el James Password.

129
00:07:42,880 --> 00:07:43,270
Listo.

130
00:07:44,230 --> 00:07:48,850
Pero qué te parece si primero agregamos el menú en el menú?

131
00:07:48,880 --> 00:07:50,110
Vamos a ir a includes.

132
00:07:50,440 --> 00:07:52,840
Dentro de includes aparece el Dashboard Sidebar.

133
00:07:53,110 --> 00:07:53,980
Voy a maximizar.

134
00:07:55,290 --> 00:07:56,880
Y aquí está el cambio, el password.

135
00:07:56,880 --> 00:08:02,160
Voy a copiar todo, está todo este bloque que está dentro del class.

136
00:08:03,430 --> 00:08:04,510
Realmente todo esto.

137
00:08:04,660 --> 00:08:05,560
Todo esto lo voy a copiar.

138
00:08:05,560 --> 00:08:07,870
Todo lo que esté dentro del A, excepto la.

139
00:08:10,060 --> 00:08:10,780
Y lo pego aquí.

140
00:08:12,730 --> 00:08:13,960
Bueno, lo voy a eliminar.

141
00:08:13,960 --> 00:08:22,480
Primero se queda vacío ya que lo pego bien en vez de Edit Profile le vamos a poner Change Password.

142
00:08:23,140 --> 00:08:30,400
Si el password existe dentro de Request Path, entonces agrega concatena el active y luego también el

143
00:08:30,400 --> 00:08:30,970
href.

144
00:08:30,970 --> 00:08:33,850
Le digo que vaya hacia el change.

145
00:08:34,860 --> 00:08:35,340
Password.

146
00:08:36,180 --> 00:08:36,540
Listo.

147
00:08:37,670 --> 00:08:43,130
Ahora si vamos a trabajar dentro de la count y el archivo template same password.

148
00:08:43,340 --> 00:08:49,280
Pero como te digo, este password es muy similar al último que hemos estado trabajando.

149
00:08:50,390 --> 00:08:52,040
Que es el Edit Profile.

150
00:08:52,490 --> 00:08:55,540
Entonces voy a entrar a Edit Profile.

151
00:08:55,820 --> 00:08:57,290
Voy a seleccionar todo.

152
00:08:57,650 --> 00:08:58,730
Voy a copiarlo.

153
00:08:59,890 --> 00:09:06,100
Y ahora volvemos al change password punto html ya k lo pegamos lo hemos pegado.

154
00:09:07,640 --> 00:09:13,000
La estructura es muy similar a que aparece el header con el título Editar perfil de usuario.

155
00:09:13,010 --> 00:09:15,560
Voy a reemplazar esto ahora quiero que diga.

156
00:09:17,170 --> 00:09:18,250
Cambiar password.

157
00:09:21,430 --> 00:09:22,030
Ahí está.

158
00:09:22,780 --> 00:09:27,710
Vamos a maximizar un poco aquí y vamos a revisar también el formulario.

159
00:09:27,740 --> 00:09:28,930
Mira, aquí aparece el form.

160
00:09:30,060 --> 00:09:31,770
Está apuntando al Edi profile.

161
00:09:31,800 --> 00:09:32,450
Ya no más.

162
00:09:32,460 --> 00:09:34,620
Aquí debe apuntar al Champ Password.

163
00:09:35,220 --> 00:09:35,640
Listo.

164
00:09:36,210 --> 00:09:40,080
Y dentro del formulario A aparecen los bloques de form.

165
00:09:40,290 --> 00:09:40,890
Recuerdas?

166
00:09:41,190 --> 00:09:42,930
Voy a eliminar este primero de nombre.

167
00:09:44,370 --> 00:09:47,490
El siguiente de teléfono e imagen también lo elimino.

168
00:09:48,620 --> 00:09:51,890
Y este de dirección y detalle y dirección lo voy a mantener.

169
00:09:53,420 --> 00:09:54,530
Lo mantengo estos dos.

170
00:09:55,520 --> 00:10:01,890
Y los que continúan de este bloqueo son para Font Siri for State for Country.

171
00:10:01,910 --> 00:10:02,720
Lo voy a eliminar.

172
00:10:06,340 --> 00:10:07,690
Vamos a quitarle un poco de espacio.

173
00:10:08,590 --> 00:10:11,710
Para este caso, yo no voy a necesitar este container extra.

174
00:10:12,760 --> 00:10:13,600
Lo voy a quitar.

175
00:10:14,050 --> 00:10:19,210
Si le quito el no significa que va a tomar todo el espacio posible.

176
00:10:19,630 --> 00:10:21,640
También vamos a ver aquí.

177
00:10:22,180 --> 00:10:25,270
Este Form Group esta haciendo cool M16.

178
00:10:25,340 --> 00:10:26,980
Le voy a quitar ese cool Ml6.

179
00:10:30,110 --> 00:10:30,470
Esto.

180
00:10:31,460 --> 00:10:34,410
Y aquí vamos a cambiarle el label por la dirección.

181
00:10:34,430 --> 00:10:35,160
Voy a cambiarle.

182
00:10:35,180 --> 00:10:36,290
Ahora tiene que decir.

183
00:10:39,520 --> 00:10:41,110
Password actual.

184
00:10:43,800 --> 00:10:45,180
Ya le ponemos.

185
00:10:46,380 --> 00:10:50,940
En este caso yo no sería un valor que viene de un formulario chango, sino que va a ser desde un input

186
00:10:50,940 --> 00:10:52,650
real que voy a crear aquí.

187
00:10:52,680 --> 00:10:53,670
Vamos a hacer un input.

188
00:10:54,060 --> 00:10:56,670
Esto va a ser un tipo type password.

189
00:10:57,760 --> 00:11:00,790
El nombre que le voy a dar es Current Password.

190
00:11:03,130 --> 00:11:04,240
Value no tiene value.

191
00:11:04,570 --> 00:11:05,740
El Border Value.

192
00:11:06,340 --> 00:11:07,930
Vamos a ponerle un placeholder.

193
00:11:09,050 --> 00:11:10,010
Y este va a ser.

194
00:11:13,840 --> 00:11:14,890
Pastor actual.

195
00:11:17,690 --> 00:11:18,500
Y el class.

196
00:11:19,010 --> 00:11:21,200
Vamos a indicarle que sea for control.

197
00:11:22,490 --> 00:11:22,880
Listo.

198
00:11:23,830 --> 00:11:25,980
Y también le digo que es un campo requerido.

199
00:11:26,550 --> 00:11:26,740
Bien.

200
00:11:27,180 --> 00:11:27,990
Lo tenemos.

201
00:11:28,560 --> 00:11:29,910
Va a ser muy similar a lo que sigue.

202
00:11:29,910 --> 00:11:31,230
Así que voy a copiar este.

203
00:11:31,860 --> 00:11:32,790
Estas dos líneas.

204
00:11:32,790 --> 00:11:33,540
Y acá las pego.

205
00:11:37,500 --> 00:11:39,030
Y a este le voy a indicar.

206
00:11:43,210 --> 00:11:44,650
Crear nuevo pastor.

207
00:11:47,390 --> 00:11:50,390
Y aquí le pongo new password en el name.

208
00:11:55,510 --> 00:11:58,720
En el fresco le pongo nuevo password.

209
00:11:59,740 --> 00:12:01,570
Es un control en required.

210
00:12:02,080 --> 00:12:06,160
Listo, pero me falta una caja más para que confirme este nuevo password.

211
00:12:06,520 --> 00:12:10,480
Así que este follón group por completo lo voy a copiar ya que lo pego.

212
00:12:12,510 --> 00:12:13,410
Y le voy a decir.

213
00:12:14,260 --> 00:12:15,130
Confirmar.

214
00:12:16,990 --> 00:12:17,770
Nuevo password.

215
00:12:18,800 --> 00:12:22,310
Que apareció el tal vez password, pero el nombre aquí debe ser.

216
00:12:23,290 --> 00:12:24,490
Config password.

217
00:12:25,590 --> 00:12:26,430
Preescolar.

218
00:12:30,340 --> 00:12:31,900
Confirmar nuevo password.

219
00:12:33,700 --> 00:12:34,180
Listo.

220
00:12:35,260 --> 00:12:36,280
Ya lo tenemos.

221
00:12:37,740 --> 00:12:39,270
Y aquí le vamos a indicar.

222
00:12:41,490 --> 00:12:42,180
Actualizar.

223
00:12:47,110 --> 00:12:48,100
Está completo.

224
00:12:48,550 --> 00:12:50,170
Vamos a la parte superior.

225
00:12:52,130 --> 00:12:56,500
Aquí tengo antes el claustro este dice usted.

226
00:12:57,020 --> 00:12:59,960
Esto lo voy a quitar si ya no es necesario.

227
00:13:01,410 --> 00:13:02,670
Vamos a borrar los cambios.

228
00:13:02,700 --> 00:13:04,110
Menú File Save All.

229
00:13:06,330 --> 00:13:10,770
Vamos a la página, voy a refrescar y le damos clic a cambiar password.

230
00:13:11,580 --> 00:13:14,610
Aquí aparece el password actual Crear nuevo password.

231
00:13:15,360 --> 00:13:22,160
Ya he ingresado el password actual de este usuario y ahora estoy creando un nuevo password que he confirmado.

232
00:13:22,170 --> 00:13:23,910
Vamos a darle clic al botón de actualizar.

233
00:13:25,370 --> 00:13:29,810
Jacky me está dando un problema porque no reconoce el atributo y username.

234
00:13:30,770 --> 00:13:37,460
Aquí hubo un pequeño problema porque mira, vamos a volver al Archivo Account Buscar y en esta línea

235
00:13:37,760 --> 00:13:43,340
en el método Change Password, en esta línea que estoy obteniendo el usuario, estoy indicándole username.

236
00:13:43,760 --> 00:13:46,970
Dos rayas para abajo exac igual la riqueza de username.

237
00:13:46,970 --> 00:13:51,200
Pero este ser name está dentro del user realmente.

238
00:13:53,760 --> 00:13:55,800
Vamos a borrar los cambios en el Safe Hall.

239
00:13:56,760 --> 00:13:57,810
Vamos a actualizar.

240
00:13:58,940 --> 00:14:05,510
Continuamos con la transacción y ya me indica que el password se actualizó exitosamente.

241
00:14:05,750 --> 00:14:06,710
Perfecto.

242
00:14:07,550 --> 00:14:12,940
Me logueado nuevamente con el password, con el nuevo password que reseteado y ha funcionado a la perfección.

243
00:14:12,950 --> 00:14:14,540
Vamos a probar nuevamente.

244
00:14:14,540 --> 00:14:20,360
A ver, voy a ingresar otra vez el password actual y voy a crear un nuevo password.

245
00:14:20,900 --> 00:14:25,130
Ya hemos ingresado el password actual y hemos confirmado el nuevo password.

246
00:14:25,130 --> 00:14:26,240
Le damos clic a actualizar.

247
00:14:27,270 --> 00:14:32,760
Y con esto hemos confirmado que el proceso para actualizar el password funciona al 100%.
