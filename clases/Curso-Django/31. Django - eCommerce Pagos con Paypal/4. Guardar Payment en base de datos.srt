1
00:00:00,360 --> 00:00:06,090
En este capítulo vamos a continuar trabajando en el registro de la data de Payment dentro de nuestra

2
00:00:06,090 --> 00:00:07,320
base de datos.

3
00:00:07,770 --> 00:00:13,590
Para esto primero vamos a la carpeta Templates Orders y aquí aparece el payment junto a HTML y va a

4
00:00:13,590 --> 00:00:14,820
ser la parte inferior.

5
00:00:15,420 --> 00:00:20,400
Aquí te va a aparecer la sección de scripts que hemos incluido dentro de esta sección de scripts.

6
00:00:20,670 --> 00:00:22,710
Ya había agregado una variable a mount.

7
00:00:23,340 --> 00:00:26,840
Ahora voy a agregar una nueva variable que le voy a poner de nombre Where.

8
00:00:31,140 --> 00:00:33,810
Y esta variable me tiene que llevar hacia.

9
00:00:36,490 --> 00:00:37,900
El Pad de Payment.

10
00:00:39,130 --> 00:00:39,550
Lo tengo.

11
00:00:39,550 --> 00:00:39,940
Listo.

12
00:00:41,470 --> 00:00:46,000
Ahora vamos a ir al interior de la función on off.

13
00:00:47,260 --> 00:00:48,250
Aquí aparece una proof.

14
00:00:48,610 --> 00:00:50,680
Voy a borrar todo el contenido que tiene.

15
00:00:50,680 --> 00:00:53,110
Excepto el orden de ira.

16
00:00:55,150 --> 00:00:55,480
Stop.

17
00:00:57,350 --> 00:01:02,690
Y aquí voy a crear una función que voy a llamarle Send data o enviar data.

18
00:01:04,950 --> 00:01:05,630
Y dentro.

19
00:01:05,640 --> 00:01:07,940
Vamos a hacer la llamada a esta.

20
00:01:07,950 --> 00:01:11,190
Yo iré al parque de Fanny en la parte superior.

21
00:01:12,120 --> 00:01:12,330
Tengo.

22
00:01:12,720 --> 00:01:15,000
La idea es ejecutar este path.

23
00:01:15,660 --> 00:01:19,110
Lo voy a ejecutar dentro de esta función sin data.

24
00:01:19,350 --> 00:01:22,890
Y para ejecutarlo, tengo que llamar a este operador Fetch.

25
00:01:24,290 --> 00:01:24,770
Dentro de esto.

26
00:01:24,770 --> 00:01:30,740
Operador Tengo que pasar la variable como primer parámetro y como segundo la data que quiero enviar.

27
00:01:31,770 --> 00:01:34,740
Comencemos indicándole cuál es el tipo de método de envío.

28
00:01:34,950 --> 00:01:36,630
Por eso aquí le voy a poner method.

29
00:01:37,790 --> 00:01:38,420
Igual.

30
00:01:40,100 --> 00:01:40,580
Vos.

31
00:01:42,070 --> 00:01:42,460
Coma.

32
00:01:42,880 --> 00:01:47,050
También vamos a indicarle el header de este objeto que estamos creando.

33
00:01:47,680 --> 00:01:50,470
Por eso aquí le coloco dos puntos.

34
00:01:51,640 --> 00:01:56,800
Aquí método sería dos puntos post header y aquí le agregamos.

35
00:01:57,860 --> 00:02:01,250
Que la data que voy a enviar va a ser en un formato content type.

36
00:02:03,450 --> 00:02:04,290
Dos puntos.

37
00:02:08,070 --> 00:02:10,800
Application es las JSON.

38
00:02:11,700 --> 00:02:12,750
Le ponemos una coma.

39
00:02:14,540 --> 00:02:20,590
Y algo que también tengo que enviar ya que estoy enviando la data en formato post es el CSR Token.

40
00:02:21,170 --> 00:02:24,890
Voy a poner aquí el X CSR Token.

41
00:02:27,610 --> 00:02:27,960
Podemos.

42
00:02:27,970 --> 00:02:28,780
Dos puntos.

43
00:02:29,690 --> 00:02:32,770
Desde aquí tenemos que mandarle este cs rf.

44
00:02:33,840 --> 00:02:35,050
Toque que aún no existe.

45
00:02:35,070 --> 00:02:35,910
Le ponemos una coma.

46
00:02:36,090 --> 00:02:39,150
Vamos a aclarar este efecto que en la parte superior.

47
00:02:40,420 --> 00:02:42,040
Justo debajo del hotel.

48
00:02:42,790 --> 00:02:43,840
Le ponemos bar.

49
00:02:45,120 --> 00:02:49,410
CS, rf, token igual a que va a ser esto realmente.

50
00:02:49,440 --> 00:02:53,430
Aquí lo que necesito es obtener las cookies de la transacción.

51
00:02:54,060 --> 00:02:56,340
Entonces voy a poner aquí Get Cookie.

52
00:02:57,880 --> 00:03:00,070
Esta función que todavía no existe, la voy a crear.

53
00:03:02,320 --> 00:03:11,010
Y le paso el sé lo que quiero que obtenga es las cookies del CS, RF, Tracking y punto final.

54
00:03:11,650 --> 00:03:13,900
Bien, ahora vamos a crear esta función.

55
00:03:14,530 --> 00:03:16,300
La voy a crear sobre el amount.

56
00:03:19,320 --> 00:03:19,920
Pero para que.

57
00:03:20,280 --> 00:03:20,870
Function.

58
00:03:21,060 --> 00:03:21,960
Get cookies.

59
00:03:22,800 --> 00:03:23,190
Cookie.

60
00:03:26,540 --> 00:03:29,870
Y le paso como parámetro el el nombre del cookie.

61
00:03:31,220 --> 00:03:33,590
Vamos a inicializar un let cookie value.

62
00:03:36,150 --> 00:03:36,930
Igual anula.

63
00:03:38,630 --> 00:03:39,950
Y hacemos un if.

64
00:03:41,500 --> 00:03:42,970
Document Cooking.

65
00:03:44,180 --> 00:03:45,460
Si existe este documento.

66
00:03:46,120 --> 00:03:50,050
Entonces también evalúa que el documento cookie.

67
00:03:52,310 --> 00:03:54,020
Sea diferente de vacío.

68
00:03:58,820 --> 00:04:00,650
Y ahora vamos a aclarar una constante.

69
00:04:01,610 --> 00:04:02,540
Qué va a hacer Cookie?

70
00:04:03,660 --> 00:04:04,890
Igual al document.

71
00:04:05,670 --> 00:04:08,880
Cookie split que la separe por.

72
00:04:10,860 --> 00:04:11,670
El punto y coma.

73
00:04:14,160 --> 00:04:18,000
Una vez que tengo este arreglo de valores, voy a hacer un bucle.

74
00:04:18,000 --> 00:04:18,720
Un Ford.

75
00:04:20,800 --> 00:04:28,680
Que y desde el valor de cero punto y coma hasta que llegue al final de la cookie del arreglo.

76
00:04:28,690 --> 00:04:29,340
Cookie, cookie.

77
00:04:29,380 --> 00:04:29,650
Punto.

78
00:04:29,770 --> 00:04:30,190
Link.

79
00:04:32,690 --> 00:04:35,690
Punto y coma y el iterador que aumente de uno en uno.

80
00:04:38,850 --> 00:04:40,010
Aquí le ponemos pegado.

81
00:04:40,020 --> 00:04:40,440
Listo.

82
00:04:42,150 --> 00:04:44,610
Y ahora voy a capturar el valor de la cookie.

83
00:04:44,970 --> 00:04:49,020
Entonces aquí le pongo con Scoop, que va a ser igual a cookies.

84
00:04:51,310 --> 00:04:56,810
Ah, mira que tengo un problema que aquí en esta definición del arreglo debería hacer cookies con ese

85
00:04:57,110 --> 00:04:57,350
si.

86
00:04:57,620 --> 00:04:59,150
Ahora si, cookies.

87
00:05:00,200 --> 00:05:01,400
Por el índice I.

88
00:05:01,520 --> 00:05:03,050
Que es el que se iterando en el bucle.

89
00:05:04,910 --> 00:05:06,410
Y elimine los espacios en blanco.

90
00:05:06,410 --> 00:05:07,280
Por eso le pongo trim.

91
00:05:08,210 --> 00:05:14,240
Lo que tengo que hacer ahora es buscar a la cookie, en particular a este name, pero esto recuerda

92
00:05:14,240 --> 00:05:16,580
que está dentro de la nomenclatura del arreglo.

93
00:05:16,940 --> 00:05:18,950
Entonces vamos a hacer una condición aquí.

94
00:05:20,780 --> 00:05:22,160
Para hacer esta búsqueda.

95
00:05:22,790 --> 00:05:25,490
Haciendo primero, extrayendo el carácter.

96
00:05:26,410 --> 00:05:28,210
Estoy indicándole que haga un súper streaming.

97
00:05:30,490 --> 00:05:34,600
Extraiga desde la oposición cero hasta el name.

98
00:05:35,960 --> 00:05:36,590
Punto.

99
00:05:37,930 --> 00:05:38,410
Link.

100
00:05:40,430 --> 00:05:41,000
Más uno.

101
00:05:42,090 --> 00:05:48,640
Porque quiero que lo que me devuelvas sea el nombre del de la cookie concatenado con un carácter.

102
00:05:48,690 --> 00:05:53,040
Ahora, si ese carácter especial es igual, idéntico.

103
00:05:54,730 --> 00:05:55,280
A Name.

104
00:05:55,300 --> 00:05:56,320
Al nombre de la cookie.

105
00:05:58,720 --> 00:06:00,280
Y el carácter que busco es igual.

106
00:06:01,500 --> 00:06:07,110
Entonces que ocurra lo siguiente que el cookie value sea igual.

107
00:06:08,370 --> 00:06:08,880
Ha de.

108
00:06:12,960 --> 00:06:13,410
Judy.

109
00:06:14,820 --> 00:06:15,540
Componente.

110
00:06:17,190 --> 00:06:18,050
De que le pasó.

111
00:06:18,450 --> 00:06:19,150
Qué punto?

112
00:06:19,230 --> 00:06:20,100
Su stream.

113
00:06:23,450 --> 00:06:24,170
Una en punto.

114
00:06:24,170 --> 00:06:24,530
Lenk.

115
00:06:27,180 --> 00:06:27,960
Más un valor.

116
00:06:30,380 --> 00:06:33,980
Y cuando tenga el valor de la wiki, creo que quiero que detenga todo.

117
00:06:33,980 --> 00:06:35,710
Que aquí termine el.

118
00:06:36,160 --> 00:06:37,250
El bucle for.

119
00:06:38,820 --> 00:06:40,110
Aquí termina el bucle for.

120
00:06:41,110 --> 00:06:46,750
Y finalmente esta llave, que es el cierre de la función, que es Cookie, voy a indicarle que retorne

121
00:06:47,560 --> 00:06:48,610
el cookie value.

122
00:06:50,810 --> 00:06:51,230
Listo.

123
00:06:51,470 --> 00:06:52,180
Ya lo tenemos.

124
00:06:52,190 --> 00:06:53,250
Entonces la función.

125
00:06:53,270 --> 00:06:56,450
Vamos a darle una última revisada para ver que todo es correcto.

126
00:06:57,260 --> 00:07:00,590
Aquí en esta condición, voy a colocarle otro signo de igual.

127
00:07:01,810 --> 00:07:04,180
Que sea diferente de vacío.

128
00:07:04,930 --> 00:07:09,300
Aquí también va a ser un consejo que documento y punto es.

129
00:07:09,370 --> 00:07:10,180
Está correcto?

130
00:07:10,780 --> 00:07:11,950
El bucle también.

131
00:07:13,180 --> 00:07:15,670
Estamos obteniendo aquí la condición.

132
00:07:15,940 --> 00:07:17,020
Idéntica nave.

133
00:07:18,480 --> 00:07:19,230
Perfecto.

134
00:07:21,150 --> 00:07:22,260
Lo tenemos listo.

135
00:07:24,260 --> 00:07:24,590
Vamos.

136
00:07:24,680 --> 00:07:25,730
Vamos a volver ahora.

137
00:07:25,730 --> 00:07:26,330
Hacia.

138
00:07:28,590 --> 00:07:29,790
La función zen data.

139
00:07:31,780 --> 00:07:39,720
Y aquí ya podemos notar que este valor que representa el CSF que ya está lleno porque está obteniéndose

140
00:07:39,940 --> 00:07:42,070
de la función de cookies que acabo de escribir.

141
00:07:43,160 --> 00:07:43,580
Listo.

142
00:07:44,300 --> 00:07:47,000
Después de querer, vamos a poner aquí una copia de la llave.

143
00:07:47,540 --> 00:07:49,250
Vamos a ponerle el body.

144
00:07:50,540 --> 00:07:51,470
Dos puntos.

145
00:07:52,900 --> 00:07:58,060
Ya eso es tener fe, porque quiero que me lo devuelva como si fuera.

146
00:07:59,620 --> 00:08:01,540
Como si fuera un string.

147
00:08:02,480 --> 00:08:04,220
Vamos a poner aquí yeso en Springfield.

148
00:08:06,030 --> 00:08:11,040
Abrimos paréntesis y lo que quiero que retorne como un string es este JSON.

149
00:08:11,670 --> 00:08:13,020
Hacemos un orden de ID.

150
00:08:14,030 --> 00:08:16,130
Igual a orden y de.

151
00:08:18,480 --> 00:08:20,010
Esta variable aún no existe.

152
00:08:20,010 --> 00:08:21,360
La vamos a crear en otro momento.

153
00:08:22,050 --> 00:08:24,120
El Transit, que es la transacción aquí.

154
00:08:25,680 --> 00:08:29,100
También hice el details y di que voy a declarar en un momento.

155
00:08:31,340 --> 00:08:32,780
También el payment method.

156
00:08:36,570 --> 00:08:39,240
Va a ser igual a esta variable payment methods.

157
00:08:39,840 --> 00:08:42,660
Aquí se cierra el body y aquí se cierra el fetch.

158
00:08:43,110 --> 00:08:44,760
Y ahora vamos a hacer un.

159
00:08:46,120 --> 00:08:46,780
Punto.

160
00:08:47,230 --> 00:08:48,130
El resultado?

161
00:08:48,910 --> 00:08:53,860
Una vez que se procese, se procese este yo en él me tiene que devolver un resultado.

162
00:08:53,860 --> 00:08:59,020
Ese resultado que me manda el servidor lo voy a capturar dentro de esta función response.

163
00:09:00,750 --> 00:09:03,360
Con un parámetro response, le ponemos response.

164
00:09:04,630 --> 00:09:07,210
Igual a JSON por ahora.

165
00:09:12,420 --> 00:09:16,980
Y también quiero crear otro team para que me imprima la data que me está devolviendo el servidor que

166
00:09:16,980 --> 00:09:19,290
lo quiere imprimir en un console log.

167
00:09:21,340 --> 00:09:21,730
Data.

168
00:09:24,190 --> 00:09:29,110
Vamos a trabajar en estas variables que me faltan details y methods.

169
00:09:29,170 --> 00:09:30,520
Vamos a la parte superior.

170
00:09:31,180 --> 00:09:35,860
Aunque details realmente no es details, es order data.

171
00:09:37,220 --> 00:09:39,440
Que le voy a poner data que me equivoque.

172
00:09:39,830 --> 00:09:42,620
Orders Data, que es el parámetro que me está devolviendo la función.

173
00:09:43,860 --> 00:09:48,120
Lo que sí necesito es el orden y di y también el primer método.

174
00:09:48,150 --> 00:09:49,160
Vamos a la parte superior.

175
00:09:49,170 --> 00:09:53,370
Entonces aquí voy a colocar var order.

176
00:09:54,680 --> 00:09:56,720
Hoy día va a ser igual.

177
00:09:58,680 --> 00:10:02,870
Al valor que viene desde el servidor, desde el objeto order punto.

178
00:10:04,310 --> 00:10:05,450
Order number.

179
00:10:06,760 --> 00:10:07,090
Esto.

180
00:10:08,750 --> 00:10:10,670
Y también el payment method.

181
00:10:12,610 --> 00:10:13,290
Va a ser igual.

182
00:10:13,300 --> 00:10:15,340
Ahora le voy a poner que sea PayPal.

183
00:10:15,880 --> 00:10:16,810
Eso es lo único que tengo.

184
00:10:20,180 --> 00:10:21,830
Y punto y coma al final para esta línea.

185
00:10:22,670 --> 00:10:24,280
Vamos un momento en la parte inferior.

186
00:10:24,290 --> 00:10:29,270
Aquí me faltó agregarle dentro del body un valor muy importante que tiene que ver con el estatus de

187
00:10:29,270 --> 00:10:30,080
la transacción.

188
00:10:30,590 --> 00:10:38,210
Por eso aquí le coloco estatus y este estatus viene desde la función orders data.

189
00:10:39,910 --> 00:10:40,850
Este orden de ataque.

190
00:10:40,860 --> 00:10:41,920
Vamos a capturarlo.

191
00:10:41,920 --> 00:10:43,600
Acá le pongo orden.

192
00:10:43,630 --> 00:10:44,530
Data, punto.

193
00:10:44,530 --> 00:10:45,190
Status.

194
00:10:46,000 --> 00:10:46,420
Listo.

195
00:10:47,470 --> 00:10:51,820
Vamos nuevamente en la parte superior de aquí tengo un pequeño detalle.

196
00:10:51,820 --> 00:10:57,070
Lo que pasa es que esta variable tiene que leerla como un string, de lo contrario me va a dar como

197
00:10:57,070 --> 00:11:01,480
una especie de byte cot, así que voy a poner como un string.

198
00:11:03,110 --> 00:11:05,570
Esto también para este él.

199
00:11:07,300 --> 00:11:08,920
Lo ponemos como si fuera un string.

200
00:11:08,920 --> 00:11:10,000
Ese código de servidor.

201
00:11:10,960 --> 00:11:12,730
El jet Cookie no lo necesita.

202
00:11:13,450 --> 00:11:14,680
Ahora vamos al orden.

203
00:11:14,920 --> 00:11:15,670
Orden Number.

204
00:11:15,670 --> 00:11:15,940
Este?

205
00:11:15,940 --> 00:11:16,240
Sí.

206
00:11:16,990 --> 00:11:18,010
Código de servidor.

207
00:11:18,640 --> 00:11:19,750
Le ponemos sus comillas.

208
00:11:20,920 --> 00:11:22,060
Vamos a seguir revisando.

209
00:11:22,060 --> 00:11:22,840
Vamos para abajo.

210
00:11:22,840 --> 00:11:27,510
Aquí está el método un approach que hemos estado trabajando y aquí había creado una función, pero aún

211
00:11:27,510 --> 00:11:29,140
no estoy ejecutando esta función.

212
00:11:29,800 --> 00:11:34,390
Entonces, después del consol, vamos a llamar a la función para que se ejecute.

213
00:11:34,390 --> 00:11:35,660
Hacemos un data.

214
00:11:37,880 --> 00:11:43,940
Revisamos la función que aparece en method post headers es headers con la S.

215
00:11:43,940 --> 00:11:45,950
Al final eso me faltó ahí.

216
00:11:47,030 --> 00:11:50,360
Ahora, cuando termina el body vamos a colocarle una coma.

217
00:11:51,830 --> 00:11:53,000
Todo parece correcto.

218
00:11:53,270 --> 00:11:55,070
Ahora vamos a una situación.

219
00:11:55,940 --> 00:11:56,930
Estoy haciendo el Fetch.

220
00:11:57,440 --> 00:11:59,000
Recuerdas a esta hora?

221
00:11:59,270 --> 00:12:00,650
Dónde está la variable definida?

222
00:12:00,650 --> 00:12:01,530
En la parte superior.

223
00:12:01,550 --> 00:12:02,570
Aquí aparece el bar.

224
00:12:02,570 --> 00:12:09,290
Yo iré hacia este path de payment que a su vez está redireccionando a una función de tipo def.

225
00:12:09,860 --> 00:12:16,040
Entonces esa función DEF es la que va a procesar, en la que va a procesar estos datos que estoy enviando

226
00:12:16,040 --> 00:12:16,820
dentro del body.

227
00:12:17,820 --> 00:12:19,200
En un metodo de tipo post.

228
00:12:20,070 --> 00:12:23,250
Vayamos entonces a esa, a esa función.

229
00:12:24,000 --> 00:12:28,770
Vamos a la carpeta orders ya que aparece bus.

230
00:12:28,980 --> 00:12:35,700
Hemos abierto bus y como puedes ver aquí me aparece la función payment para trabajar esta función payment.

231
00:12:35,730 --> 00:12:37,620
Voy a necesitar importar.

232
00:12:39,410 --> 00:12:41,540
Primeramente el de The Models.

233
00:12:41,600 --> 00:12:42,950
Voy a poner aqui Punto Models.

234
00:12:44,270 --> 00:12:47,660
Voy a necesitar el Order y también la entidad Payment.

235
00:12:49,250 --> 00:12:54,590
También voy a necesitar una herramienta, el JSON, porque estoy recibiendo objetos dentro de una estructura

236
00:12:54,590 --> 00:12:55,040
JSON.

237
00:12:56,140 --> 00:12:56,590
Listo.

238
00:12:57,040 --> 00:12:57,350
Bien.

239
00:12:57,370 --> 00:13:00,460
Voy a darle un enter porque será mejor.

240
00:13:02,370 --> 00:13:05,130
Y comienzo creando una variable llamada body.

241
00:13:06,630 --> 00:13:07,380
Voy a ponerle un bot.

242
00:13:07,400 --> 00:13:09,000
Es igual a JSON con floats.

243
00:13:11,280 --> 00:13:12,060
Ricketts.

244
00:13:13,950 --> 00:13:20,250
Para que me capture todos los valores que se encuentran en el body de este request, que es justamente

245
00:13:20,250 --> 00:13:21,040
lo que necesito.

246
00:13:21,060 --> 00:13:27,510
El orden ID está dentro de este body para poder hacer la consulta en la base de datos y obtener la orden

247
00:13:27,510 --> 00:13:34,170
de compra obteniendo el orden de compra yo ya puedo gestionar el objeto, un objeto de tipo payment.

248
00:13:35,010 --> 00:13:37,290
Entonces hacemos un order igual a.

249
00:13:38,400 --> 00:13:40,830
Llama a la entidad Order Objects.

250
00:13:42,110 --> 00:13:42,760
Punto.

251
00:13:43,040 --> 00:13:43,370
Get.

252
00:13:44,670 --> 00:13:45,390
Hago el kari.

253
00:13:45,720 --> 00:13:46,920
Le digo que user.

254
00:13:47,950 --> 00:13:49,870
Igual hará que puedes usar.

255
00:13:50,920 --> 00:13:53,260
También indicó que ya ha sido ordenado.

256
00:13:53,270 --> 00:13:55,240
En este caso les digo que todavía no fols.

257
00:13:56,450 --> 00:13:58,460
Y también le paso el orden number.

258
00:13:59,560 --> 00:14:05,770
Que en este caso se encuentra dentro del body y el body va a tener ese parámetro que se llama Order

259
00:14:05,770 --> 00:14:06,310
aid.

260
00:14:10,170 --> 00:14:10,890
Lo tenemos listo.

261
00:14:10,890 --> 00:14:11,730
Ya tenemos la orden.

262
00:14:11,740 --> 00:14:14,430
Entonces ahora podemos crear el Payment.

263
00:14:14,430 --> 00:14:15,270
El objeto Payment?

264
00:14:15,750 --> 00:14:18,960
Vamos a hacer un Payment igual a Payment.

265
00:14:19,110 --> 00:14:21,480
Llama al objeto Payment a la entidad.

266
00:14:23,080 --> 00:14:27,670
Y le vamos a poner como parámetro primeramente el usuario request punto.

267
00:14:29,800 --> 00:14:30,340
Giuseppe.

268
00:14:31,720 --> 00:14:35,920
Le paso el payment aid que viene desde el body.

269
00:14:38,680 --> 00:14:39,730
Trans Heidi.

270
00:14:41,360 --> 00:14:41,680
Bueno, no sé.

271
00:14:41,690 --> 00:14:42,170
Una coma.

272
00:14:42,860 --> 00:14:43,560
Seguimos.

273
00:14:43,580 --> 00:14:45,800
Ahora le ponemos el Payment Method.

274
00:14:47,680 --> 00:14:49,330
Y eso también viene desde el body.

275
00:14:52,230 --> 00:14:53,640
Y le pongo payment.

276
00:14:55,590 --> 00:14:56,060
Método.

277
00:15:00,070 --> 00:15:02,030
También le pongo el empate.

278
00:15:04,070 --> 00:15:05,480
Y le pongo order.

279
00:15:05,840 --> 00:15:06,620
Punto.

280
00:15:06,980 --> 00:15:07,900
Total está.

281
00:15:08,030 --> 00:15:09,680
Esto viene desde el objeto orden.

282
00:15:11,530 --> 00:15:12,670
Que viene la base de datos.

283
00:15:12,970 --> 00:15:13,360
Listo.

284
00:15:14,530 --> 00:15:17,680
El estatus viene desde el body.

285
00:15:20,040 --> 00:15:22,050
Este estatus recuerda que se trata.

286
00:15:23,200 --> 00:15:29,520
O es el valor que te devuelve PayPal para indicarte que la transacción fue correcta o de repente te

287
00:15:29,520 --> 00:15:30,330
puede volver un error.

288
00:15:30,330 --> 00:15:33,330
Te puede decir esta persona no tiene fondos en su cuenta, hay errores.

289
00:15:33,780 --> 00:15:35,250
Ese estatus es muy importante.

290
00:15:36,190 --> 00:15:39,730
Una vez que tengo listo el objeto Payment, voy a hacer un payment.

291
00:15:40,750 --> 00:15:41,490
Para que?

292
00:15:43,490 --> 00:15:43,890
Punto.

293
00:15:45,140 --> 00:15:46,700
Lo guardamos en la base de datos.

294
00:15:48,670 --> 00:15:54,520
Y voy a llamar nuevamente a Order porque recuerda que hay una relación entre Order y Payment de Frank

295
00:15:54,520 --> 00:15:54,850
Coin.

296
00:15:56,060 --> 00:15:57,730
Entonces el Order.

297
00:15:57,740 --> 00:16:00,830
El objeto Order tiene como fraude al Payment.

298
00:16:01,160 --> 00:16:05,420
Entonces tengo que setear ese punto payment con el objeto que acabo de crear.

299
00:16:07,380 --> 00:16:09,990
También voy a indicarle Orders is order.

300
00:16:10,170 --> 00:16:13,590
En este caso ya cambiaría inicialmente esta como false, recuerdas?

301
00:16:14,190 --> 00:16:15,660
Ahora va a estar como true.

302
00:16:16,890 --> 00:16:20,940
Entonces aquí también hacemos un order seis para actualizar esas propiedades.

303
00:16:22,600 --> 00:16:30,510
Y finalmente hacemos un return render hacia el objeto request y el template orders payment.

304
00:16:31,000 --> 00:16:31,870
HTML.

305
00:16:32,530 --> 00:16:36,010
Vamos a revisar que todo es correcto dentro de este objeto payment.

306
00:16:36,640 --> 00:16:39,340
Giuseppe me equipa y me meto a Mount Path.

307
00:16:39,430 --> 00:16:40,120
Es order.

308
00:16:40,120 --> 00:16:42,640
Aquí debería ser no order total, sino order.

309
00:16:43,680 --> 00:16:44,430
Total.

310
00:16:46,070 --> 00:16:46,730
Ahora sí.

311
00:16:47,970 --> 00:16:53,850
Vamos a ir un momento a Payment, porque este este payment hoy es igual a Transit y el valor que le

312
00:16:53,850 --> 00:16:56,550
sigue de la pagina a payment.

313
00:16:56,850 --> 00:17:04,590
HTML A ver, es correcto si lo estoy viendo por aquí que se llama Trans Aid y el orden ahí también es

314
00:17:04,590 --> 00:17:08,190
que vamos a la parte superior en un momento al método Get Cookie.

315
00:17:09,450 --> 00:17:14,670
Aquí en este for yo le había puesto igual cero y Cookie debería hacer cookies.

316
00:17:16,280 --> 00:17:19,100
Vamos ahora hacia el bus Speedy Payment.

317
00:17:19,190 --> 00:17:20,450
Aquí está la función Payment.

318
00:17:21,830 --> 00:17:25,070
Y aquí hay un pequeño detalle dentro de este objeto Payment.

319
00:17:26,110 --> 00:17:32,900
Yo le había puesto dentro de Payment este tributo Hammond a Mount Aid, no a Mount Pate.

320
00:17:33,850 --> 00:17:36,820
Vamos a corregirlo si lo quieres.

321
00:17:36,910 --> 00:17:38,950
Vamos a revisarlo para que lo notes.

322
00:17:38,960 --> 00:17:41,890
Vamos a ir a Orders Models API.

323
00:17:42,330 --> 00:17:46,210
Y dentro del Class Payment, vas a notar que le he puesto a Mount.

324
00:17:46,420 --> 00:17:48,670
Ahí lo tenemos.

325
00:17:48,670 --> 00:17:49,150
Listo.

326
00:17:49,900 --> 00:17:51,130
Voy a borrar los cambios.

327
00:17:51,160 --> 00:17:52,570
Menú Field Safe all.

328
00:17:54,690 --> 00:17:58,560
Y ahora vamos a darle clic al botón Refrescar en la página.

329
00:18:01,570 --> 00:18:03,490
Vamos a darle ahora al botón PayPal.

330
00:18:05,980 --> 00:18:07,830
Llama para decir que estoy logueado en la página.

331
00:18:07,840 --> 00:18:08,530
No hay problema.

332
00:18:09,070 --> 00:18:12,610
Y ahora vamos a darle clic al botón en la parte final que dice Peinado.

333
00:18:15,910 --> 00:18:16,930
Está procesando.

334
00:18:17,620 --> 00:18:21,670
Esto significa que se ha ejecutado sin ningún problema.

335
00:18:21,670 --> 00:18:24,220
Y ya se insertó este récord en mi base de datos.

336
00:18:24,490 --> 00:18:26,860
Vayamos entonces al llamado Administration.

337
00:18:27,460 --> 00:18:29,710
Esto es lo que el 8000 es la Admin.

338
00:18:30,190 --> 00:18:33,220
Y vamos a buscar al Orders Payment.

339
00:18:33,250 --> 00:18:34,270
Le damos click Payment.

340
00:18:34,570 --> 00:18:36,820
Y aquí me aparece el número de orden.

341
00:18:36,820 --> 00:18:37,630
Número de Payment.

342
00:18:37,990 --> 00:18:44,570
Damos click y mira, ya me apareció aquí el user, el payment, el Payment Heidy.

343
00:18:44,880 --> 00:18:47,440
Y el estatus que es completado.

344
00:18:48,810 --> 00:18:50,520
Continuamos en el siguiente capítulo.
