--  TABLAS

CREATE TABLE PLANTEL
(codigoFB       NUMBER(5,0)     NOT NULL,
 rutFB          CHAR(9)         NOT NULL,
 apellido1FB    VARCHAR2(15)    NOT NULL,
 apellido2FB    VARCHAR2(15)    NOT NULL,
 nombresFB      VARCHAR2(20)    NOT NULL,
 fechaNacFB     DATE            NOT NULL,
 pesoFB         NUMBER(6,3)     NOT NULL,
 alturaFB       NUMBER(3,2)     NOT NULL,
 posicionFB     CHAR(2)         NULL,
 pieFB          CHAR(7)         NOT NULL
);
 
CREATE TABLE EQUIPO
(codigoPT           NUMBER(4,0) NOT NULL,
 codigoFB           NUMBER(5,0) NOT NULL,
 cantidadGol        NUMBER(1,0) NOT NULL,
 minutosJug         NUMBER(2,0) NOT NULL,
 cantidadTarjAmar   NUMBER(1,0) NOT NULL,
 cantidadTarjRoja   NUMBER(1,0) NOT NULL
);

CREATE TABLE PARTIDO
(codigoPT       NUMBER(4,0) NOT NULL,
 fechaPT        DATE        NOT NULL,
 codigoES       NUMBER(2,0) NOT NULL,
 codigoCL       NUMBER(2,0) NOT NULL,
 situacionPT    CHAR(1)     NOT NULL,
 duracionPT     NUMBER(3,0) NULL
);

--  INTEGRIDAD

ALTER TABLE PLANTEL
ADD CONSTRAINT PK_PLANTEL PRIMARY KEY(codigoFB);

ALTER TABLE EQUIPO
ADD CONSTRAINT PK_EQUIPO PRIMARY KEY(codigoPT,codigoFB);

ALTER TABLE PARTIDO
ADD CONSTRAINT PK_PARTIDO PRIMARY KEY(codigoPT);

ALTER TABLE EQUIPO
ADD CONSTRAINT FK_PLANTEL_EQUIPO FOREIGN KEY(codigoFB)
REFERENCES PLANTEL(codigoFB);

ALTER TABLE EQUIPO
ADD CONSTRAINT FK_PARTIDO_EQUIPO FOREIGN KEY(codigoPT)
REFERENCES PARTIDO(codigoPT);

ALTER TABLE PLANTEL
ADD CONSTRAINT CK_alturaFB CHECK (alturaFB >= 1.50);

ALTER TABLE PLANTEL
ADD CONSTRAINT CK_posicionFB CHECK (posicionFB IN ('PT','DF','CT','DL'));

ALTER TABLE EQUIPO
MODIFY minutosJug DEFAULT 0;

--   DATOS

INSERT INTO PLANTEL VALUES(22222,'222222222','SANCHEZ','SANCHEZ','ALEXIS','19/12/1988',80,1.69,'DL','diestro');
INSERT INTO PLANTEL VALUES(33333,'333333333','MEDEL','SOTO','GARY','03/08/1987',82,1.71,'CT','diestro');
INSERT INTO PLANTEL VALUES(44444,'444444444','BRAVO','MUÑOZ','CLAUDIO','13/04/1983',86,1.84,'PT','zurdo');  

INSERT INTO PARTIDO VALUES(1111,'16-09-2023',12,02,'L',93);
INSERT INTO PARTIDO VALUES(5555,'28-10-2023',12,02,'V',95);
INSERT INTO PARTIDO VALUES(6666,'04-11-2023',12,02,'L',90);

INSERT INTO EQUIPO VALUES(1111,22222,1,50,1,0);
INSERT INTO EQUIPO VALUES(5555,22222,2,70,0,0);
INSERT INTO EQUIPO VALUES(5555,33333,0,57,1,0);
INSERT INTO EQUIPO VALUES(5555,44444,1,80,0,1);
INSERT INTO EQUIPO VALUES(6666,22222,1,70,0,0);
INSERT INTO EQUIPO VALUES(6666,33333,1,90,1,0);
